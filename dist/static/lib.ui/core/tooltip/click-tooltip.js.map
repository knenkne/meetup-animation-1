{"version":3,"file":"click-tooltip.js","sources":["../../src/tooltip/click-tooltip.jsx"],"sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport _ from 'lodash'\r\n\r\nimport { Perimeter } from '../perimeter'\r\nimport { preventHandler } from '../utils'\r\n\r\nimport { Tooltip } from './tooltip'\r\n\r\n/* eslint-disable valid-jsdoc, comment: некорректный парсинг jsdoc */\r\n/**\r\n * [Zeplin](https://app.zeplin.io/project/59312e1ebdf1da6fc8d37ffb/dashboard?q=Tooltip)\r\n * Компонент вывода всплывающей подсказки по клику\r\n *\r\n * @param {Object} props - свойства компонента\r\n * @return {JSX} - компонент\r\n */\r\nexport class ClickTooltip extends React.PureComponent {\r\n    static propTypes = {\r\n        children: PropTypes.node, // eslint-disable-line react/no-unused-prop-types, comment: более краткая запись компонента, но в API указать надо\r\n        onOpen: PropTypes.func,\r\n        onClose: PropTypes.func\r\n    }\r\n\r\n    static defaultProps = {\r\n        children: void 0,\r\n        onOpen: _.noop,\r\n        onClose: _.noop\r\n    }\r\n\r\n    state = {\r\n        isOpened: false\r\n    }\r\n\r\n    setRefPerimeter = (c) => {\r\n        this.perimeter = c\r\n    }\r\n\r\n    handleTooltipClick = (event) => {\r\n        this.onHandling(this.state.isOpened, !this.state.isOpened, event)\r\n\r\n        this.setState({\r\n            isOpened: !this.state.isOpened\r\n        })\r\n    }\r\n\r\n    handleClose = (event) => {\r\n        this.onHandling(this.state.isOpened, false, event)\r\n\r\n        this.setState({\r\n            isOpened: false\r\n        })\r\n    }\r\n\r\n    onHandling = (prevState, nextState, event) => {\r\n        if (!prevState && nextState) {\r\n            this.perimeter.enableOnClickOutside()\r\n            this.props.onOpen(event)\r\n        } else {\r\n            this.perimeter.disableOnClickOutside()\r\n            this.props.onClose(event)\r\n        }\r\n    }\r\n\r\n    render () {\r\n        const passedProps = _(this.props)\r\n            .omit(['target', 'onOpen', 'onClose'])\r\n            .extend({\r\n                onClick: preventHandler(this.handleTooltipClick),\r\n                forceOpened: this.state.isOpened\r\n            })\r\n            .value()\r\n\r\n        return (\r\n            <Perimeter disableOnClickOutside ref={this.setRefPerimeter} onClickOutside={this.handleClose}>\r\n                <Tooltip {...passedProps} />\r\n            </Perimeter>\r\n        )\r\n    }\r\n}\r\n\r\nClickTooltip.displayName = 'Tooltip.Click'\r\n"],"names":["ClickTooltip","isOpened","c","perimeter","event","onHandling","state","setState","prevState","nextState","enableOnClickOutside","props","onOpen","disableOnClickOutside","onClose","passedProps","_","omit","extend","onClick","preventHandler","handleTooltipClick","forceOpened","value","setRefPerimeter","handleClose","React","PureComponent","children","PropTypes","node","func","noop","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IACaA,YAAb;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA,4DAaY;AACJC,MAAAA,QAAQ,EAAE;AADN,KAbZ;;AAAA,sEAiBsB,UAACC,CAAD,EAAO;AACrB,YAAKC,SAAL,GAAiBD,CAAjB;AACH,KAnBL;;AAAA,yEAqByB,UAACE,KAAD,EAAW;AAC5B,YAAKC,UAAL,CAAgB,MAAKC,KAAL,CAAWL,QAA3B,EAAqC,CAAC,MAAKK,KAAL,CAAWL,QAAjD,EAA2DG,KAA3D;;AAEA,YAAKG,QAAL,CAAc;AACVN,QAAAA,QAAQ,EAAE,CAAC,MAAKK,KAAL,CAAWL;AADZ,OAAd;AAGH,KA3BL;;AAAA,kEA6BkB,UAACG,KAAD,EAAW;AACrB,YAAKC,UAAL,CAAgB,MAAKC,KAAL,CAAWL,QAA3B,EAAqC,KAArC,EAA4CG,KAA5C;;AAEA,YAAKG,QAAL,CAAc;AACVN,QAAAA,QAAQ,EAAE;AADA,OAAd;AAGH,KAnCL;;AAAA,iEAqCiB,UAACO,SAAD,EAAYC,SAAZ,EAAuBL,KAAvB,EAAiC;AAC1C,UAAI,CAACI,SAAD,IAAcC,SAAlB,EAA6B;AACzB,cAAKN,SAAL,CAAeO,oBAAf;;AACA,cAAKC,KAAL,CAAWC,MAAX,CAAkBR,KAAlB;AACH,OAHD,MAGO;AACH,cAAKD,SAAL,CAAeU,qBAAf;;AACA,cAAKF,KAAL,CAAWG,OAAX,CAAmBV,KAAnB;AACH;AACJ,KA7CL;;AAAA;AAAA;;AAAA;AAAA;AAAA,6BA+Cc;AACN,UAAMW,WAAW,GAAGC,CAAC,CAAC,KAAKL,KAAN,CAAD,CACfM,IADe,CACV,CAAC,QAAD,EAAW,QAAX,EAAqB,SAArB,CADU,EAEfC,MAFe,CAER;AACJC,QAAAA,OAAO,EAAEC,cAAc,CAAC,KAAKC,kBAAN,CADnB;AAEJC,QAAAA,WAAW,EAAE,KAAKhB,KAAL,CAAWL;AAFpB,OAFQ,EAMfsB,KANe,EAApB;;AAQA,0BACI,oBAAC,SAAD;AAAW,QAAA,qBAAqB,MAAhC;AAAiC,QAAA,GAAG,EAAE,KAAKC,eAA3C;AAA4D,QAAA,cAAc,EAAE,KAAKC;AAAjF,sBACI,oBAAC,OAAD,EAAaV,WAAb,CADJ,CADJ;AAKH;AA7DL;;AAAA;AAAA,EAAkCW,KAAK,CAACC,aAAxC;;gBAAa3B,2BACU;AACf4B,EAAAA,QAAQ,EAAEC,SAAS,CAACC,IADL;AACW;AAC1BlB,EAAAA,MAAM,EAAEiB,SAAS,CAACE,IAFH;AAGfjB,EAAAA,OAAO,EAAEe,SAAS,CAACE;AAHJ;;gBADV/B,8BAOa;AAClB4B,EAAAA,QAAQ,EAAE,KAAK,CADG;AAElBhB,EAAAA,MAAM,EAAEI,CAAC,CAACgB,IAFQ;AAGlBlB,EAAAA,OAAO,EAAEE,CAAC,CAACgB;AAHO;;AAyD1BhC,YAAY,CAACiC,WAAb,GAA2B,eAA3B;;;;"}