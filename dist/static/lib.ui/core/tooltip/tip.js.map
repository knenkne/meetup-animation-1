{"version":3,"file":"tip.js","sources":["../../src/tooltip/tip.jsx"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport _ from 'lodash'\n\nimport { parseDirection, makeDirection } from '../utils'\n\nimport defaultTheme from './style.css'\n\n/**\n * [Zeplin](https://app.zeplin.io/project/59312e1ebdf1da6fc8d37ffb/dashboard?q=Tooltip)\n * Компонент всплывающей подсказки\n *\n * @param {Object} props - свойства компонента\n * @return {JSX} - компонент\n */\nexport class Tip extends React.Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            direction: parseDirection(this.props.direction),\n            startDirection: parseDirection(this.props.direction)\n        }\n        this.tipRef = null\n    }\n\n\n    componentDidUpdate (previousProps) {\n        if (this.tipRef && this.props.forceOpened && this.props.forceOpened !== previousProps.forceOpened) {\n            // eslint-disable-next-line react/no-did-update-set-state, comment: меняем положение подсказки, если она выходит за границы окна\n            this.setState(({ direction, startDirection }) => ({\n                direction: makeDirection(this.tipRef, direction, startDirection)\n            }))\n        }\n    }\n\n    refCallback = (element) => {\n        this.tipRef = element\n    }\n\n    render () {\n        const { children, theme, mode, forceOpened } = this.props\n        const [verticalDirection, horizontalDirection] = this.state.direction\n\n        if (!children) {\n            return null\n        }\n\n        const passedProps = _(this.props)\n            .omit(['children', 'direction', 'mode', 'forceOpened', 'theme'])\n            .extend({\n                className: classnames(\n                    theme.tip,\n                    theme[verticalDirection],\n                    theme[horizontalDirection],\n                    theme[mode],\n                    forceOpened && theme.show\n                ),\n                'aria-live': 'assertive',\n                role: 'tooltip'\n            })\n            .value()\n\n        return (\n            <div {...passedProps} ref={this.refCallback}>\n                <div className={defaultTheme.activeZone}>\n                    <div className={defaultTheme.contents}>\n                        {children}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nTip.propTypes = {\n    theme: PropTypes.object,\n    children: PropTypes.node,\n    /**\n     * Направление отображения подсказки относительно родителя\n     */\n    direction: PropTypes.oneOf([\n        'topLeft',\n        'topRight',\n        'topCenter',\n        'bottomLeft',\n        'bottomRight',\n        'bottomCenter'\n    ]),\n    mode: PropTypes.oneOf(['error', 'info']),\n    forceOpened: PropTypes.bool\n}\n\nTip.defaultProps = {\n    children: null,\n    theme: defaultTheme,\n    mode: 'info',\n    direction: 'topLeft',\n    forceOpened: false\n}\n\nTip.displayName = 'Tooltip.Tip'\n"],"names":["Tip","props","element","tipRef","state","direction","parseDirection","startDirection","previousProps","forceOpened","setState","makeDirection","children","theme","mode","verticalDirection","horizontalDirection","passedProps","_","omit","extend","className","classnames","tip","show","role","value","refCallback","defaultTheme","activeZone","contents","React","Component","propTypes","PropTypes","object","node","oneOf","bool","defaultProps","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;;IACaA,GAAb;AAAA;;AAAA;;AACI,eAAaC,KAAb,EAAoB;AAAA;;AAAA;;AAChB,8BAAMA,KAAN;;AADgB,kEAoBN,UAACC,OAAD,EAAa;AACvB,YAAKC,MAAL,GAAcD,OAAd;AACH,KAtBmB;;AAGhB,UAAKE,KAAL,GAAa;AACTC,MAAAA,SAAS,EAAEC,cAAc,CAAC,MAAKL,KAAL,CAAWI,SAAZ,CADhB;AAETE,MAAAA,cAAc,EAAED,cAAc,CAAC,MAAKL,KAAL,CAAWI,SAAZ;AAFrB,KAAb;AAIA,UAAKF,MAAL,GAAc,IAAd;AAPgB;AAQnB;;AATL;AAAA;AAAA,uCAYwBK,aAZxB,EAYuC;AAAA;;AAC/B,UAAI,KAAKL,MAAL,IAAe,KAAKF,KAAL,CAAWQ,WAA1B,IAAyC,KAAKR,KAAL,CAAWQ,WAAX,KAA2BD,aAAa,CAACC,WAAtF,EAAmG;AAC/F;AACA,aAAKC,QAAL,CAAc;AAAA,cAAGL,SAAH,QAAGA,SAAH;AAAA,cAAcE,cAAd,QAAcA,cAAd;AAAA,iBAAoC;AAC9CF,YAAAA,SAAS,EAAEM,aAAa,CAAC,MAAI,CAACR,MAAN,EAAcE,SAAd,EAAyBE,cAAzB;AADsB,WAApC;AAAA,SAAd;AAGH;AACJ;AAnBL;AAAA;AAAA,6BAyBc;AAAA,wBACyC,KAAKN,KAD9C;AAAA,UACEW,QADF,eACEA,QADF;AAAA,UACYC,KADZ,eACYA,KADZ;AAAA,UACmBC,IADnB,eACmBA,IADnB;AAAA,UACyBL,WADzB,eACyBA,WADzB;;AAAA,iDAE2C,KAAKL,KAAL,CAAWC,SAFtD;AAAA,UAECU,iBAFD;AAAA,UAEoBC,mBAFpB;;AAIN,UAAI,CAACJ,QAAL,EAAe;AACX,eAAO,IAAP;AACH;;AAED,UAAMK,WAAW,GAAGC,CAAC,CAAC,KAAKjB,KAAN,CAAD,CACfkB,IADe,CACV,CAAC,UAAD,EAAa,WAAb,EAA0B,MAA1B,EAAkC,aAAlC,EAAiD,OAAjD,CADU,EAEfC,MAFe,CAER;AACJC,QAAAA,SAAS,EAAEC,UAAU,CACjBT,KAAK,CAACU,GADW,EAEjBV,KAAK,CAACE,iBAAD,CAFY,EAGjBF,KAAK,CAACG,mBAAD,CAHY,EAIjBH,KAAK,CAACC,IAAD,CAJY,EAKjBL,WAAW,IAAII,KAAK,CAACW,IALJ,CADjB;AAQJ,qBAAa,WART;AASJC,QAAAA,IAAI,EAAE;AATF,OAFQ,EAafC,KAbe,EAApB;;AAeA,0BACI,wCAAST,WAAT;AAAsB,QAAA,GAAG,EAAE,KAAKU;AAAhC,uBACI;AAAK,QAAA,SAAS,EAAEC,YAAY,CAACC;AAA7B,sBACI;AAAK,QAAA,SAAS,EAAED,YAAY,CAACE;AAA7B,SACKlB,QADL,CADJ,CADJ,CADJ;AASH;AAzDL;;AAAA;AAAA,EAAyBmB,KAAK,CAACC,SAA/B;AA4DAhC,GAAG,CAACiC,SAAJ,GAAgB;AACZpB,EAAAA,KAAK,EAAEqB,SAAS,CAACC,MADL;AAEZvB,EAAAA,QAAQ,EAAEsB,SAAS,CAACE,IAFR;;AAGZ;AACJ;AACA;AACI/B,EAAAA,SAAS,EAAE6B,SAAS,CAACG,KAAV,CAAgB,CACvB,SADuB,EAEvB,UAFuB,EAGvB,WAHuB,EAIvB,YAJuB,EAKvB,aALuB,EAMvB,cANuB,CAAhB,CANC;AAcZvB,EAAAA,IAAI,EAAEoB,SAAS,CAACG,KAAV,CAAgB,CAAC,OAAD,EAAU,MAAV,CAAhB,CAdM;AAeZ5B,EAAAA,WAAW,EAAEyB,SAAS,CAACI;AAfX,CAAhB;AAkBAtC,GAAG,CAACuC,YAAJ,GAAmB;AACf3B,EAAAA,QAAQ,EAAE,IADK;AAEfC,EAAAA,KAAK,EAAEe,YAFQ;AAGfd,EAAAA,IAAI,EAAE,MAHS;AAIfT,EAAAA,SAAS,EAAE,SAJI;AAKfI,EAAAA,WAAW,EAAE;AALE,CAAnB;AAQAT,GAAG,CAACwC,WAAJ,GAAkB,aAAlB;;;;"}