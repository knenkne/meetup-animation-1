{"version":3,"file":"popup.js","sources":["../../src/popup/popup.jsx"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactModal from 'react-modal'\nimport _ from 'lodash'\nimport classnames from 'classnames'\n\nimport { Icon } from '../icon'\nimport { deprecate } from '../utils'\n\nimport defaultTheme from './style.css'\n\nReactModal.setAppElement('body')\n\nconst getScrollWidth = _.memoize(() => {\n    const div = document.createElement('div')\n\n    div.style.overflowY = 'scroll'\n    div.style.width = '50px'\n    div.style.height = '50px'\n    div.style.visibility = 'hidden'\n\n    document.body.appendChild(div)\n    const scrollWidth = div.offsetWidth - div.clientWidth\n    document.body.removeChild(div)\n    return scrollWidth\n})\n\n/**\n * DEPRECATED. DO NOT USE\n *\n * @param {Object} props - свойства компонента\n * @return {JSX} - компонент\n */\nexport class Popup extends React.PureComponent {\n    contentLabel = _.uniqueId('popup-title-')\n    contentDescription = _.uniqueId('popup-description-')\n\n    render () {\n        const { forceOpened, title, size, onClose, children, a11y, 'data-node': dataNode } = this.props\n\n        if (forceOpened && (document.body.offsetHeight > document.documentElement.clientHeight)) {\n            document.body.style.paddingRight = `${getScrollWidth()}px`\n        } else {\n            document.body.style.paddingRight = ''\n        }\n\n        return (\n            <ReactModal\n                isOpen={forceOpened}\n                className={defaultTheme.modal}\n                onRequestClose={onClose}\n                shouldCloseOnOverlayClick={!!onClose}\n                overlayClassName={defaultTheme.overlay}\n                ariaHideApp={a11y.ariaHideApp}\n                contentLabel={title ? this.contentLabel : a11y.title}\n            >\n                <aside\n                    role=\"dialog\"\n                    aria-labelledby={this.contentLabel}\n                    aria-describedby={this.contentDescription}\n                    className={classnames(defaultTheme.container, defaultTheme[size])}\n                    data-node={dataNode}\n                    data-unit=\"modal\"\n                >\n                    {onClose &&\n                    <button\n                        className={defaultTheme.close}\n                        title={a11y.closeButtonTitle}\n                        onClick={onClose}\n                        data-unit=\"modal:close\"\n                        aria-label={a11y.closeButtonTitle}\n                        type=\"button\"\n                    >\n                        <Icon name=\"icon:core/common/close\" />\n                    </button>\n                    }\n                    <legend className={defaultTheme.legend}>\n                        <h2\n                            data-unit=\"modal:title\"\n                            className={classnames(defaultTheme.title, { [defaultTheme.titleEmpty]: !title })}\n                            id={this.contentLabel}\n                        >\n                            {title}\n                        </h2>\n                        <div\n                            data-unit=\"modal:body\"\n                            className={defaultTheme.body}\n                            id={this.contentDescription}\n                        >\n                            {children}\n                        </div>\n                    </legend>\n                </aside>\n            </ReactModal>\n        )\n\n    }\n}\n\nPopup.propTypes = {\n    forceOpened: PropTypes.bool,\n    onClose: PropTypes.func,\n    children: PropTypes.node,\n    title: PropTypes.string,\n    size: PropTypes.oneOf(['sm', 'md', 'lg', 'xl']),\n    'data-node': PropTypes.string,\n    a11y: PropTypes.shape({\n        /**\n         * Сокрытие от screen reader всего контента кроме модального окна\n         */\n        ariaHideApp: PropTypes.bool,\n        /**\n         * Смысловой заголовок кнопки закрытия модального окна (если она есть)\n         */\n        closeButtonTitle: PropTypes.string,\n        /**\n         * Смысловой заголовок модалки (используется вместо title)\n         */\n        title: PropTypes.string,\n    }).isRequired\n}\n\nPopup.defaultProps = {\n    forceOpened: false,\n    children: null,\n    onClose: void 0,\n    title: void 0,\n    size: 'md',\n    'data-node': void 0,\n    a11y: void 0\n}\n\nPopup.theme = defaultTheme\nPopup.displayName = 'Popup'\nexport default deprecate()(Popup)\n"],"names":["ReactModal","setAppElement","getScrollWidth","_","memoize","div","document","createElement","style","overflowY","width","height","visibility","body","appendChild","scrollWidth","offsetWidth","clientWidth","removeChild","Popup","uniqueId","props","forceOpened","title","size","onClose","children","a11y","dataNode","offsetHeight","documentElement","clientHeight","paddingRight","defaultTheme","modal","overlay","ariaHideApp","contentLabel","contentDescription","classnames","container","close","closeButtonTitle","legend","titleEmpty","React","PureComponent","propTypes","PropTypes","bool","func","node","string","oneOf","shape","isRequired","defaultProps","theme","displayName","deprecate"],"mappings":"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"}