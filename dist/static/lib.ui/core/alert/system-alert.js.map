{"version":3,"file":"system-alert.js","sources":["../../src/alert/system-alert.jsx"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\nimport classnames from 'classnames'\n\nimport { Icon } from '../icon'\n\nimport { Description } from './description'\nimport { Actions } from './actions'\nimport defaultTheme from './style.css'\n\nconst iconMap = {\n    success: 'icon:core/common/system-alert-success',\n    info: 'icon:core/common/system-alert-info',\n    error: 'icon:core/common/system-alert-error'\n}\n\nconst iconTheme = { self: classnames(Icon.theme.self, defaultTheme.icon) }\n\n/**\n * [Zeplin](https://app.zeplin.io/project/5c74ef0d753f3ebccdf8f33d?seid=5ca761ce7afbd0be3d4613c0)\n *\n * @param {Object} props - свойства компонента\n * @return {JSX} - компонент\n */\nexport class SystemAlert extends React.PureComponent {\n    titleId = _.uniqueId('alert-process-title-')\n    descriptionId = _.uniqueId('alert-process-description-')\n\n    render () {\n        const { title, mode, children, a11y } = this.props\n\n        const extend = {\n            className: classnames(defaultTheme.alert, defaultTheme[mode], !children && defaultTheme.onlyTitle),\n            'data-unit': `process:alert:${mode}`,\n            role: 'alert',\n            'aria-describedby': this.descriptionId\n        }\n\n        if (title) {\n            extend['aria-labelledby'] = this.titleId\n        } else {\n            extend['aria-label'] = a11y.title\n        }\n\n        const passedProps = _(this.props)\n            .omit(this.props, [\n                'title',\n                'mode',\n                'children',\n                'a11y',\n                'size'\n            ])\n            .extend(extend)\n            .value()\n\n        return (\n            <div {...passedProps}>\n                <Icon theme={iconTheme} name={iconMap[mode]} size=\"self\" />\n                {title &&\n                <h3\n                    data-unit=\"process:alert:title\"\n                    className={defaultTheme.title}\n                    id={this.titleId}\n                >\n                    {title}\n                </h3>\n                }\n                {React.Children.map(children, (child) => {\n                    if (_.get(child, 'type.displayName') === Description.displayName) {\n                        return React.cloneElement(child, _.extend({}, child.props, { id: this.descriptionId }))\n                    }\n\n                    return child\n                })}\n            </div>\n        )\n    }\n}\n\nSystemAlert.propTypes = {\n    mode: PropTypes.oneOf([\n        'success',\n        'info',\n        'error'\n    ]).isRequired,\n    title: PropTypes.string,\n    children: PropTypes.node,\n    a11y: PropTypes.shape({\n        /**\n         * Текст, который должен описывать Alert.System на тот случай, если title у компонента отсутствует. Не передавать, если props.title есть\n         */\n        title: PropTypes.string\n    }).isRequired\n}\n\nSystemAlert.defaultProps = {\n    title: void 0,\n    children: void 0\n}\n\nSystemAlert.theme = defaultTheme\nSystemAlert.Description = Description\nSystemAlert.Actions = Actions\nSystemAlert.displayName = 'Alert.System'\n"],"names":["iconMap","success","info","error","iconTheme","self","classnames","Icon","theme","defaultTheme","icon","SystemAlert","_","uniqueId","props","title","mode","children","a11y","extend","className","alert","onlyTitle","role","descriptionId","titleId","passedProps","omit","value","React","Children","map","child","get","Description","displayName","cloneElement","id","PureComponent","propTypes","PropTypes","oneOf","isRequired","string","node","shape","defaultProps","Actions"],"mappings":"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"}