{"version":3,"file":"make-direction.js","sources":["../../src/utils/make-direction.js"],"sourcesContent":["import _ from 'lodash'\n\nconst BOTTOM = 'bottom'\nconst TOP = 'top'\nconst LEFT = 'left'\nconst RIGHT = 'right'\nconst CENTER = 'center'\nconst LINE_HEIGHT = 25\nconst HALF_TIP_WIDTH = 144\n\nexport const parseDirection = (directionStr) =>\n    _.kebabCase(\n        directionStr\n            .replace('Text', '')\n            .replace('Icon', '')\n            .replace('sideLeft', 'topLeft')\n            .replace('sideRight', 'topLeft')\n    ).split('-')\n\nconst makeVerticalDirection = (\n    height,\n    bottom,\n    clientHeight,\n    verticalDirection,\n    startVerticalDirection\n) => {\n    switch (true) {\n        case verticalDirection === TOP && bottom <= height:\n            return BOTTOM\n        case startVerticalDirection === TOP && bottom - height - LINE_HEIGHT > height:\n            return TOP\n\n        case verticalDirection === BOTTOM && bottom >= clientHeight:\n            return TOP\n        case startVerticalDirection === BOTTOM && bottom + LINE_HEIGHT + height < clientHeight:\n            return BOTTOM\n        default:\n            return verticalDirection\n    }\n}\n\nconst makeHorizontalDirection = (\n    right,\n    left,\n    clientWidth,\n    horizontalDirection\n) => {\n    if (right >= clientWidth) {\n        if (horizontalDirection === LEFT) {\n            return right - HALF_TIP_WIDTH < clientWidth ? CENTER : RIGHT\n        }\n\n        if (horizontalDirection === CENTER) {\n            return RIGHT\n        }\n    }\n\n    if (left <= 0) {\n        if (horizontalDirection === RIGHT) {\n            return left + HALF_TIP_WIDTH > 0 ? CENTER : LEFT\n        }\n\n        if (horizontalDirection === CENTER) {\n            return LEFT\n        }\n    }\n\n    return horizontalDirection\n}\n\nexport const makeDirection = (node, direction, startDirection = []) => {\n    if (!node) {\n        return direction\n    }\n\n    const [verticalDirection, horizontalDirection] = direction\n    const [startVerticalDirection] = startDirection\n    const { bottom, height, left, right } = node.getBoundingClientRect()\n    const { clientHeight, clientWidth } = document.documentElement\n\n    const newVerticalDirection = makeVerticalDirection(\n        height,\n        bottom,\n        clientHeight,\n        verticalDirection,\n        startVerticalDirection\n    )\n    const newHorizontalDirection = makeHorizontalDirection(\n        right,\n        left,\n        clientWidth,\n        horizontalDirection\n    )\n\n    return [newVerticalDirection, newHorizontalDirection]\n}\n"],"names":["BOTTOM","TOP","LEFT","RIGHT","CENTER","LINE_HEIGHT","HALF_TIP_WIDTH","parseDirection","directionStr","_","kebabCase","replace","split","makeVerticalDirection","height","bottom","clientHeight","verticalDirection","startVerticalDirection","makeHorizontalDirection","right","left","clientWidth","horizontalDirection","makeDirection","node","direction","startDirection","getBoundingClientRect","document","documentElement","newVerticalDirection","newHorizontalDirection"],"mappings":"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"}