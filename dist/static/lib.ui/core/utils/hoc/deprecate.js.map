{"version":3,"file":"deprecate.js","sources":["../../../src/utils/hoc/deprecate.jsx"],"sourcesContent":["import React from 'react'\nimport _ from 'lodash'\n\nimport { getDisplayName } from '../get-display-name'\n\nimport style from './style.css'\n\nconst warnCache = {}\n\nconst deprecatedLabel = (WrappedComponent) => ({ children }) => (\n    <WrappedComponent>\n        <div className={style.warningLabel} />\n        {children}\n    </WrappedComponent>\n)\n\nconst DivWithErrorHandling = deprecatedLabel(({ children }) => <div>{children}</div>)\n\n\nfunction warnInDevelopmentOnce (name, replacementName, removeVersion) {\n    if (process.env.NODE_ENV !== 'production' && !warnCache[name]) {\n        // Using console conditionally\n        console.warn(`Component Usage Warning: ${name} is deprecated and will be deleted${removeVersion ? ` since v${removeVersion}` : ''}. Please use ${replacementName} instead`) // eslint-disable-line no-console, comment: предупреждение о deprecate для компонентов\n        warnCache[name] = true\n    }\n}\n\nexport const deprecate = (removeVersion, pathName, replacementName = 'no component') => (Component) => {\n    const DeprecatedComponent = (props) => {\n        warnInDevelopmentOnce(pathName || getDisplayName(Component), replacementName, removeVersion)\n\n        if (process.env.NODE_ENV !== 'production') {\n            return (\n                <DivWithErrorHandling>\n                    <Component {...props} />\n                </DivWithErrorHandling>\n            )\n        }\n\n        return (\n            <Component {...props} />\n        )\n    }\n\n    _.forEach(Component, (prop, key) => {\n        DeprecatedComponent[key] = prop\n    })\n    DeprecatedComponent.displayName = getDisplayName(Component, 'DeprecatedComponent')\n    DeprecatedComponent.WrappedComponent = Component\n\n    return DeprecatedComponent\n}\n"],"names":["warnCache","deprecatedLabel","WrappedComponent","children","style","warningLabel","DivWithErrorHandling","warnInDevelopmentOnce","name","replacementName","removeVersion","process","env","NODE_ENV","console","warn","deprecate","pathName","Component","DeprecatedComponent","props","getDisplayName","_","forEach","prop","key","displayName"],"mappings":";;;;;AAOA,IAAMA,SAAS,GAAG,EAAlB;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,gBAAD;AAAA,SAAsB;AAAA,QAAGC,QAAH,QAAGA,QAAH;AAAA,wBAC1C,oBAAC,gBAAD,qBACI;AAAK,MAAA,SAAS,EAAEC,KAAK,CAACC;AAAtB,MADJ,EAEKF,QAFL,CAD0C;AAAA,GAAtB;AAAA,CAAxB;;AAOA,IAAMG,oBAAoB,GAAGL,eAAe,CAAC;AAAA,MAAGE,QAAH,SAAGA,QAAH;AAAA,sBAAkB,iCAAMA,QAAN,CAAlB;AAAA,CAAD,CAA5C;;AAGA,SAASI,qBAAT,CAAgCC,IAAhC,EAAsCC,eAAtC,EAAuDC,aAAvD,EAAsE;AAClE,MAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyC,CAACb,SAAS,CAACQ,IAAD,CAAvD,EAA+D;AAC3D;AACAM,IAAAA,OAAO,CAACC,IAAR,oCAAyCP,IAAzC,+CAAkFE,aAAa,qBAAcA,aAAd,IAAgC,EAA/H,0BAAiJD,eAAjJ,eAF2D;;AAG3DT,IAAAA,SAAS,CAACQ,IAAD,CAAT,GAAkB,IAAlB;AACH;AACJ;;IAEYQ,SAAS,GAAG,SAAZA,SAAY,CAACN,aAAD,EAAgBO,QAAhB;AAAA,MAA0BR,eAA1B,uEAA4C,cAA5C;AAAA,SAA+D,UAACS,SAAD,EAAe;AACnG,QAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,KAAD,EAAW;AACnCb,MAAAA,qBAAqB,CAACU,QAAQ,IAAII,cAAc,CAACH,SAAD,CAA3B,EAAwCT,eAAxC,EAAyDC,aAAzD,CAArB;;AAEA,UAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACvC,4BACI,oBAAC,oBAAD,qBACI,oBAAC,SAAD,EAAeO,KAAf,CADJ,CADJ;AAKH;;AAED,0BACI,oBAAC,SAAD,EAAeA,KAAf,CADJ;AAGH,KAdD;;AAgBAE,IAAAA,CAAC,CAACC,OAAF,CAAUL,SAAV,EAAqB,UAACM,IAAD,EAAOC,GAAP,EAAe;AAChCN,MAAAA,mBAAmB,CAACM,GAAD,CAAnB,GAA2BD,IAA3B;AACH,KAFD;;AAGAL,IAAAA,mBAAmB,CAACO,WAApB,GAAkCL,cAAc,CAACH,SAAD,EAAY,qBAAZ,CAAhD;AACAC,IAAAA,mBAAmB,CAACjB,gBAApB,GAAuCgB,SAAvC;AAEA,WAAOC,mBAAP;AACH,GAxBwB;AAAA;;;;"}