{"version":3,"file":"range-input.js","sources":["../../../../src/calendar/range-picker/components/range-input.jsx"],"sourcesContent":["import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\nimport { format, isValid, toDate } from 'date-fns'\n\nimport { Input } from '../../../input'\nimport {\n    LOCALE,\n    PLACEHOLDER,\n    EMPTY_STRING,\n    MASK_DATE,\n    MASK_DATE_INVALID,\n    RU_DATE_REGEXP,\n    underScoreWidthSpaceRegExp\n} from '../../constants'\nimport { isofyingDateString } from '../../utils'\nimport style from '../../calendar-input.css'\n\nconst defaultTheme = { ...Input.theme, ...style }\nconst prepareValue = (value) => {\n    if (Input.Masked.utils.isMaskedValue(value)) {\n        return value.replace(RU_DATE_REGEXP, '$3.$2.$1')\n    } else if ((value.length > MASK_DATE.length) && isValid(value) && !underScoreWidthSpaceRegExp.test(value)) {\n        return format(toDate(value), 'L', LOCALE)\n    }\n\n    return value\n}\n\nexport class RangeInput extends PureComponent {\n\n    handleChange = (event) => {\n        if (Input.Masked.utils.isMaskedValue(this.props.value)) {\n            this.props.onChange(Input.getInputDiff(event.target.value, this.prevSelectionStart, event.target.selectionStart), event)\n        } else {\n            this.props.onChange(isofyingDateString({ value: event.target.value }), event)\n        }\n    }\n    handleFocus = (event) => {\n        this.props.onFocus(isofyingDateString({ value: event.target.value }), event)\n    }\n    handleBlur = (event) => {\n        this.props.onBlur(isofyingDateString({ value: event.target.value }), event)\n    }\n    handleKeyDown = (event) => {\n        this.prevSelectionStart = event.target.selectionStart\n        this.props.onKeyDown(event)\n    }\n    handleContextMenu = (event) => {\n        this.prevSelectionStart = event.target.selectionStart\n        this.props.onContextMenu(event)\n    }\n\n    render () {\n        const { value, disabled, theme, ...passedProps } = this.props\n        return (\n            <Input.Masked.Typeahead\n                inputMode=\"decimal\"\n                {...passedProps}\n                value={prepareValue(value)}\n                mask={Input.Masked.utils.maskedFormat(value.length === MASK_DATE.length ? MASK_DATE : MASK_DATE_INVALID, value)}\n                guide={false}\n                placeholderChar=\"_\"\n                placeholder={disabled ? EMPTY_STRING : PLACEHOLDER}\n                autoComplete=\"off\"\n                onChange={this.handleChange}\n                onFocus={this.handleFocus}\n                onBlur={this.handleBlur}\n                onKeyDown={this.handleKeyDown}\n                onContextMenu={this.handleContextMenu}\n                disabled={disabled}\n                theme={theme}\n            />\n        )\n    }\n}\n\nRangeInput.propTypes = {\n    id: PropTypes.string.isRequired,\n    value: PropTypes.string,\n    error: PropTypes.string,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    onKeyDown: PropTypes.func,\n    onContextMenu: PropTypes.func,\n    name: PropTypes.string,\n    disabled: PropTypes.bool,\n    touched: PropTypes.bool,\n    theme: PropTypes.shape({\n        input: PropTypes.string,\n        calendarInputBlock: PropTypes.string,\n        iconPosition: PropTypes.string,\n        block: PropTypes.string,\n        disabled: PropTypes.string,\n        error: PropTypes.string,\n        icon: PropTypes.string,\n        inputIcon: PropTypes.string\n    })\n}\n\nRangeInput.defaultProps = {\n    value: '',\n    error: void 0,\n    onChange: _.noop,\n    onFocus: _.noop,\n    onBlur: _.noop,\n    onKeyDown: _.noop,\n    onContextMenu: _.noop,\n    name: EMPTY_STRING,\n    disabled: false,\n    touched: false,\n    theme: defaultTheme\n}\n\nexport default RangeInput\n"],"names":["defaultTheme","Input","theme","style","prepareValue","value","Masked","utils","isMaskedValue","replace","RU_DATE_REGEXP","length","MASK_DATE","isValid","underScoreWidthSpaceRegExp","test","format","toDate","LOCALE","RangeInput","event","props","onChange","getInputDiff","target","prevSelectionStart","selectionStart","isofyingDateString","onFocus","onBlur","onKeyDown","onContextMenu","disabled","passedProps","maskedFormat","MASK_DATE_INVALID","EMPTY_STRING","PLACEHOLDER","handleChange","handleFocus","handleBlur","handleKeyDown","handleContextMenu","PureComponent","propTypes","id","PropTypes","string","isRequired","error","func","name","bool","touched","shape","input","calendarInputBlock","iconPosition","block","icon","inputIcon","defaultProps","_","noop"],"mappings":"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"}