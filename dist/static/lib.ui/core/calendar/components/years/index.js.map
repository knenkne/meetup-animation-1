{"version":3,"file":"index.js","sources":["../../../../src/calendar/components/years/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport _ from 'lodash'\nimport { subYears, getYear } from 'date-fns'\nimport cn from 'classnames'\n\nimport Navigation from '../common/navigation'\nimport { useCalendarContext } from '../../context'\nimport { fullISOFormat, getItemsYears } from '../../utils'\nimport { CALENDAR_MODES, MULTIPLE_OF_TEN } from '../../constants'\nimport navigationStyle from '../common/navigation.css'\n\nimport { Grid } from './grid'\nimport style from './style.css'\n\nexport const PERIOD = 10\nconst minValidYear = 1800\nconst maxValidYear = 2200\n\nconst Years = () => {\n    const { mode, startingYear, showDate: initialShowDate } = useCalendarContext()\n    const [showDate, changeDate] = useState(initialShowDate)\n\n    const handleChangePeriod = (period) => () => changeDate(fullISOFormat(subYears(showDate, period)))\n\n    const handlePeriodPrev = handleChangePeriod(PERIOD)\n    const handlePeriodNext = handleChangePeriod(-PERIOD)\n    const items = getItemsYears(showDate, startingYear)\n\n    // Делаем из самого первого года в выборке подпись навигации в формате 2000-е, 2010-е и т.д.\n    const minYear = _.get(items, ['0', '0'], null)\n    const parsedYear = getYear(minYear)\n    const period = minYear ? `${parsedYear - (parsedYear % MULTIPLE_OF_TEN)}` : null\n    const isYearsMode = mode === CALENDAR_MODES.YEARS\n\n    useEffect(() => {\n        if (showDate !== initialShowDate) {\n            changeDate(initialShowDate)\n        }\n\n    }, [initialShowDate])\n\n    return (\n        <div className={cn(!isYearsMode && style.offsetTop)}>\n            <Navigation\n                handlePrevClick={parsedYear >= minValidYear ? handlePeriodPrev : _.noop}\n                handleNextClick={parsedYear <= maxValidYear ? handlePeriodNext : _.noop}\n                wrapperClassName={navigationStyle.navigationWrapper}\n            >\n                {`${period}-е`}\n            </Navigation>\n            <Grid items={items} />\n        </div>\n    )\n}\n\nexport { Years }\n"],"names":["PERIOD","minValidYear","maxValidYear","Years","useCalendarContext","mode","startingYear","initialShowDate","showDate","useState","changeDate","handleChangePeriod","period","fullISOFormat","subYears","handlePeriodPrev","handlePeriodNext","items","getItemsYears","minYear","_","get","parsedYear","getYear","MULTIPLE_OF_TEN","isYearsMode","CALENDAR_MODES","YEARS","useEffect","cn","style","offsetTop","noop","navigationStyle","navigationWrapper"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAcaA,MAAM,GAAG;AACtB,IAAMC,YAAY,GAAG,IAArB;AACA,IAAMC,YAAY,GAAG,IAArB;;IAEMC,KAAK,GAAG,SAARA,KAAQ,GAAM;AAAA,4BAC0CC,kBAAkB,EAD5D;AAAA,MACRC,IADQ,uBACRA,IADQ;AAAA,MACFC,YADE,uBACFA,YADE;AAAA,MACsBC,eADtB,uBACYC,QADZ;;AAAA,kBAEeC,QAAQ,CAACF,eAAD,CAFvB;AAAA;AAAA,MAETC,QAFS;AAAA,MAECE,UAFD;;AAIhB,MAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,MAAD;AAAA,WAAY;AAAA,aAAMF,UAAU,CAACG,aAAa,CAACC,QAAQ,CAACN,QAAD,EAAWI,MAAX,CAAT,CAAd,CAAhB;AAAA,KAAZ;AAAA,GAA3B;;AAEA,MAAMG,gBAAgB,GAAGJ,kBAAkB,CAACX,MAAD,CAA3C;AACA,MAAMgB,gBAAgB,GAAGL,kBAAkB,CAAC,CAACX,MAAF,CAA3C;AACA,MAAMiB,KAAK,GAAGC,aAAa,CAACV,QAAD,CAA3B,CARgB;;AAWhB,MAAMW,OAAO,GAAGC,CAAC,CAACC,GAAF,CAAMJ,KAAN,EAAa,CAAC,GAAD,EAAM,GAAN,CAAb,EAAyB,IAAzB,CAAhB;;AACA,MAAMK,UAAU,GAAGC,OAAO,CAACJ,OAAD,CAA1B;AACA,MAAMP,MAAM,GAAGO,OAAO,aAAMG,UAAU,GAAIA,UAAU,GAAGE,eAAjC,IAAsD,IAA5E;AACA,MAAMC,WAAW,GAAGpB,IAAI,KAAKqB,cAAc,CAACC,KAA5C;AAEAC,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIpB,QAAQ,KAAKD,eAAjB,EAAkC;AAC9BG,MAAAA,UAAU,CAACH,eAAD,CAAV;AACH;AAEJ,GALQ,EAKN,CAACA,eAAD,CALM,CAAT;AAOA,sBACI;AAAK,IAAA,SAAS,EAAEsB,UAAE,CAAC,CAACJ,WAAD,IAAgBK,KAAK,CAACC,SAAvB;AAAlB,kBACI,oBAAC,UAAD;AACI,IAAA,eAAe,EAAET,UAAU,IAAIrB,YAAd,GAA6Bc,gBAA7B,GAAgDK,CAAC,CAACY,IADvE;AAEI,IAAA,eAAe,EAAEV,UAAU,IAAIpB,YAAd,GAA6Bc,gBAA7B,GAAgDI,CAAC,CAACY,IAFvE;AAGI,IAAA,gBAAgB,EAAEC,OAAe,CAACC;AAHtC,eAKQtB,MALR,aADJ,eAQI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEK;AAAb,IARJ,CADJ;AAYH;;;;"}