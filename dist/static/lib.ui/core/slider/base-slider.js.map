{"version":3,"file":"base-slider.js","sources":["../../src/slider/base-slider.jsx"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport _ from 'lodash'\n\nimport { disableHandler, preventHandler } from '../utils'\n\nimport { Segments } from './segments'\nimport {\n    computeStepByDigits,\n    getValueByMouse,\n    getGridValue,\n    getLinearValue,\n    addSliderHandlers,\n    removeSliderHandlers\n} from './utils'\nimport defaultTheme from './style.css'\n\nexport class BaseSlider extends React.PureComponent {\n    static propTypes = {\n        colorScheme: PropTypes.oneOf([\n            'base',\n            'purple',\n            'blue',\n            'green',\n            'skyblue',\n            'black',\n            'gold',\n            'aqua'\n        ]).isRequired,\n        mode: PropTypes.oneOf([\n            'segmented'\n        ]),\n\n        value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n        onChange: PropTypes.func,\n        disabled: PropTypes.bool,\n\n        error: PropTypes.string,\n        min: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        max: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        step: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        digits: PropTypes.arrayOf(PropTypes.number),\n        grid: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string])),\n        transitionDuration: PropTypes.number,\n\n        /**\n         * Thrown out functions for adding global handlers to the event listeners of the document. CAUTION: do not change, only for unit-tests\n         */\n        addSliderHandlers: PropTypes.func.isRequired,\n        removeSliderHandlers: PropTypes.func.isRequired\n    }\n\n    static defaultProps = {\n        colorScheme: 'base',\n        mode: void 0,\n\n        onChange: _.noop,\n        disabled: false,\n\n        error: void 0,\n        prefix: '',\n        suffix: '',\n        min: 0,\n        max: 100,\n        step: 1,\n        grid: void 0,\n        digits: void 0,\n        title: void 0,\n        transitionDuration: 0,\n\n        addSliderHandlers,\n        removeSliderHandlers\n    }\n\n    componentWillUnmount () {\n        this.props.removeSliderHandlers(document, this.handleMouseMove, this.handleMouseUp)\n    }\n\n    setRefTrack = (component) => {\n        this.track = component\n    }\n\n    setClosestValue = (event) => {\n        const { min, max, step, digits, value, onChange, disabled, grid } = this.props\n\n        const newValue = getValueByMouse(\n            event,\n            this.track,\n            pageXOffset,\n            computeStepByDigits(min, max, step, digits),\n            min,\n            max,\n            grid,\n            value\n        )\n\n        if (newValue !== value) {\n            disableHandler(onChange, disabled)(newValue, event)\n        }\n    }\n\n    handleMouseDown = (event) => {\n        if (!this.props.disabled) {\n            this.setClosestValue(event)\n\n            this.props.addSliderHandlers(document, this.handleMouseMove, this.handleMouseUp)\n        }\n    }\n\n    handleMouseMove = preventHandler(this.setClosestValue)\n\n    handleMouseUp = (event) => {\n        this.setClosestValue(event)\n\n        this.props.removeSliderHandlers(document, this.handleMouseMove, this.handleMouseUp)\n    }\n\n    render () {\n        const {\n            min,\n            max,\n            value,\n            grid,\n            mode,\n            step,\n            digits,\n            colorScheme,\n            error,\n            transitionDuration\n        } = this.props\n\n        const leftOffset = grid\n            ? `${100 * getGridValue(value, grid)}%`\n            : `${100 * getLinearValue(value, min, max)}%`\n\n        return (\n            <div\n                className={classnames(\n                    defaultTheme.basic,\n                    defaultTheme[colorScheme],\n                    error && defaultTheme.error\n                )}\n            >\n                <div\n                    ref={this.setRefTrack}\n                    className={defaultTheme.track}\n                    onMouseDown={this.handleMouseDown}\n                    onTouchStart={this.handleMouseDown}\n                >\n                    <div\n                        className={defaultTheme.progress}\n                        style={{\n                            width: leftOffset,\n                            transition: `background-color 0.17s ease-in-out, border-color 0.17s ease-in-out, width ${transitionDuration}s linear`\n                        }}\n                    />\n                    <div\n                        className={defaultTheme.thumb}\n                        style={{\n                            left: leftOffset,\n                            transition: `background-color 0.17s ease-in-out, border-color 0.17s ease-in-out, left ${transitionDuration}s linear`\n                        }}\n                    />\n                    {mode === 'segmented' && (\n                        <Segments\n                            min={min}\n                            max={max}\n                            step={computeStepByDigits(min, max, step, digits)}\n                            grid={grid}\n                        />\n                    )}\n                </div>\n            </div>\n        )\n    }\n}\n"],"names":["BaseSlider","component","track","event","props","min","max","step","digits","value","onChange","disabled","grid","newValue","getValueByMouse","pageXOffset","computeStepByDigits","disableHandler","setClosestValue","addSliderHandlers","document","handleMouseMove","handleMouseUp","preventHandler","removeSliderHandlers","mode","colorScheme","error","transitionDuration","leftOffset","getGridValue","getLinearValue","classnames","defaultTheme","basic","setRefTrack","handleMouseDown","progress","width","transition","thumb","left","React","PureComponent","PropTypes","oneOf","isRequired","oneOfType","string","number","func","bool","arrayOf","_","noop","prefix","suffix","title"],"mappings":"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"}