{"version":3,"file":"target-input.js","sources":["../../../src/input/suggest/target-input.jsx"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\nimport classnames from 'classnames'\n\nimport { Input } from '../input'\nimport { Icon } from '../../icon'\nimport { handleStopPropagation, memoizeFuncWithArgs, omittere } from '../../utils'\n\nimport { iconTheme, inputTheme } from './themes'\nimport style from './style.css'\n\nconst omitSuggestInput = [\n    'active',\n    'asyncValidating',\n    'autofilled',\n    'dirty',\n    'dispatch',\n    'fallbackIcon',\n    'forceOpened',\n    'hasServerError',\n    'icon',\n    'iconFromCode',\n    'initialOptions',\n    'initialQuery',\n    'initialValue',\n    'inputComponent',\n    'invalid',\n    'isLoading',\n    'isSearch',\n    'keyboardTimeout',\n    'masked',\n    'mode',\n    'onChangeInput',\n    'onChangeOption',\n    'onDataRequest',\n    'onRetry',\n    'options',\n    'pristine',\n    'query',\n    'requestTimeout',\n    'submitFailed',\n    'submitting',\n    'touched',\n    'translations',\n    'valid',\n    'visited',\n    'warning',\n    'withOptions'\n]\n\nconst getIconName = (mode, iconName) => mode ? `icon:core/common/${mode}` : iconName\n\nexport class TargetInput extends React.Component {\n    handleChange = (...args) => {\n        this.props.onChange(...args)\n        if (this.context.dropdown) {\n            this.context.dropdown.handleOpen()\n        }\n    }\n\n    render () {\n        const {\n            icon, fallbackIcon, value, disabled, onChange,\n            forceOpened, mode, withOptions, inputComponent: Component\n        } = this.props\n\n        const iconName = mode || icon\n\n        return (\n            <div className={classnames(style.input, style[mode], { [style.inputWithIcon]: iconName, [style.opened]: forceOpened && withOptions })}>\n                {iconName &&\n                <span className={classnames(style.inputIcon, { [style.itemIconFallback]: fallbackIcon })}>\n                    {this.renderIcon(iconName)}\n                </span>\n                }\n                <Component autoComplete=\"none\" {...this.props} theme={inputTheme} onChange={this.handleChange} />\n                {value && !disabled &&\n                <button\n                    className={style.close}\n                    type=\"button\"\n                    onClick={memoizeFuncWithArgs(onChange, '')}\n                    aria-hidden\n                    tabIndex={-1}\n                    onFocus={handleStopPropagation}\n                >\n                    <Icon name=\"icon:core/common/close\" />\n                </button>\n                }\n            </div>\n        )\n    }\n\n    renderIcon (iconName) {\n        const { icon, iconFromCode, fallbackIcon, mode } = this.props\n\n        if (mode || (icon && iconFromCode)) {\n            return (\n                <Icon\n                    name={getIconName(mode, iconName)}\n                    theme={iconTheme}\n                    data-text={fallbackIcon}\n                    mode={fallbackIcon ? 'fallback' : void 0}\n                />\n            )\n        } else if (icon) {\n            return <img className={style.img} alt={fallbackIcon || ''} src={icon} />\n        }\n\n        return void 0\n    }\n}\n\nTargetInput.propTypes = {\n    icon: PropTypes.string,\n    fallbackIcon: PropTypes.string,\n    value: PropTypes.string,\n    onChange: PropTypes.func,\n    iconFromCode: PropTypes.bool,\n    disabled: PropTypes.bool,\n    forceOpened: PropTypes.bool,\n    mode: PropTypes.oneOf(['search', void 0]),\n    inputComponent: PropTypes.func,\n    withOptions: PropTypes.bool\n}\n\nTargetInput.contextTypes = {\n    dropdown: PropTypes.shape({\n        onOpen: PropTypes.func\n    })\n}\n\nTargetInput.defaultProps = {\n    icon: void 0,\n    fallbackIcon: void 0,\n    value: '',\n    onChange: _.noop,\n    iconFromCode: false,\n    disabled: false,\n    forceOpened: false,\n    mode: void 0,\n    inputComponent: omittere(omitSuggestInput)(Input),\n    withOptions: false\n}\n\nTargetInput.displayName = 'Input.Suggest.TargetInput'\n"],"names":["omitSuggestInput","getIconName","mode","iconName","TargetInput","props","onChange","context","dropdown","handleOpen","icon","fallbackIcon","value","disabled","forceOpened","withOptions","Component","inputComponent","classnames","style","input","inputWithIcon","opened","inputIcon","itemIconFallback","renderIcon","inputTheme","handleChange","close","memoizeFuncWithArgs","handleStopPropagation","iconFromCode","iconTheme","img","React","propTypes","PropTypes","string","func","bool","oneOf","contextTypes","shape","onOpen","defaultProps","_","noop","omittere","Input","displayName"],"mappings":"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"}