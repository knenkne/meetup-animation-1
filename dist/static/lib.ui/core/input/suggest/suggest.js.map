{"version":3,"file":"suggest.js","sources":["../../../src/input/suggest/suggest.jsx"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport { Dropdown } from '../../dropdown'\nimport { Loader } from '../../loader'\n\nimport { TargetInput } from './target-input'\nimport { Long } from './long'\nimport { NoMatches } from './no-matches'\nimport { Error } from './error'\nimport { Option } from './option'\nimport { dropdownTheme, contentsTheme, loaderTheme, optionTheme, optionThemeWithIcon, inputTheme } from './themes'\nimport defaultTheme from './style.css'\n\n/* eslint-disable valid-jsdoc, comment: некорректный парсинг jsdoc */\n/**\n * [Zeplin](https://app.zeplin.io/project/59312e1ebdf1da6fc8d37ffb/dashboard?q=input%20suggest)\n * Текстовое поле с выпадающим списком\n *\n * @param {Object} props - свойства компонента\n * @return {JSX} - компонент\n */\nexport class Suggest extends React.Component {\n    static displayName = 'Input.Suggest'\n    static TargetInput = TargetInput\n    static Long = Long\n    static NoMatches = NoMatches\n    static Error = Error\n    static theme = defaultTheme\n\n    static propTypes = {\n        value: PropTypes.string,\n        onFocus: PropTypes.func,\n        onBlur: PropTypes.func,\n        mode: PropTypes.oneOf(['error', 'noMatches', 'long', void 0]),\n        isLoading: PropTypes.bool,\n        disabled: PropTypes.bool,\n        error: PropTypes.string,\n        placeholder: PropTypes.string,\n        translations: PropTypes.shape({\n            requestTimeout: PropTypes.string,\n            noMatches: PropTypes.string,\n            repeat: PropTypes.string,\n            requestError: PropTypes.string\n        }),\n        /**\n         * Компонент, который будет формировать ввод в Dropdown.TargetInput\n         */\n        inputComponent: PropTypes.func,\n        /**\n         * Строка ввода (не путать с value)\n         */\n        query: PropTypes.string,\n        /**\n         * Опции\n         */\n        options: PropTypes.arrayOf(PropTypes.shape({\n            title: PropTypes.string,\n            description: PropTypes.string,\n            value: PropTypes.string.isRequired,\n            icon: PropTypes.string\n        })),\n        /**\n         * Поле ввода под поиск\n         */\n        isSearch: PropTypes.bool,\n        /**\n         * Иконка должна быть взята из Icon (при false - из img)\n         */\n        iconFromCode: PropTypes.bool,\n        /**\n         * При смене опции\n         */\n        onChangeOption: PropTypes.func,\n        /**\n         * При смене ввода\n         */\n        onChangeInput: PropTypes.func,\n        /**\n         * При нажатии \"Повторить\"\n         */\n        onRetry: PropTypes.func,\n        /**\n         * При смене опции или ввода\n         */\n        onChange: PropTypes.func,\n        /**\n         * При скролле плашки опций\n         */\n        onScroll: PropTypes.func\n    }\n\n    static defaultProps = {\n        inputComponent: void 0,\n        onChangeOption: _.noop,\n        onChangeInput: _.noop,\n        onRetry: _.noop,\n        onFocus: _.noop,\n        onChange: _.noop,\n        onBlur: _.noop,\n        onScroll: _.noop,\n        value: void 0,\n        query: void 0,\n        mode: void 0,\n        disabled: false,\n        isLoading: false,\n        error: void 0,\n        options: [],\n        iconFromCode: true,\n        isSearch: false,\n        translations: {\n            requestTimeout: void 0,\n            noMatches: void 0,\n            repeat: void 0,\n            requestError: void 0\n        },\n        placeholder: void 0\n    }\n\n    getModeRender = () => {\n        const { options, value, query, onRetry, mode, iconFromCode, translations: {\n            requestTimeout,\n            repeat,\n            noMatches,\n            requestError\n        } } = this.props\n\n        switch (mode) {\n            case 'long':\n                return requestTimeout && <Long onClick={onRetry} title={repeat}>{requestTimeout}</Long>\n            case 'error':\n                return requestError && <Error onClick={onRetry} title={repeat}>{requestError}</Error>\n            case 'noMatches':\n                return noMatches && <NoMatches>{noMatches}</NoMatches>\n            default:\n                return _.map(options, ({ value: optionValue, title, description, icon }) => (\n                    <Option\n                        key={optionValue}\n                        value={optionValue}\n                        title={title}\n                        description={description}\n                        theme={icon ? optionThemeWithIcon : optionTheme}\n                        searchString={query || value}\n                        icon={icon}\n                        iconFromCode={iconFromCode}\n                    />\n                ))\n        }\n    }\n\n    handleFocus = (event) => {\n        this.props.onFocus(this.props.value, event)\n    }\n\n    handleChangeOption = (value) => {\n        this.props.onChangeOption(value)\n        this.props.onChange(value)\n    }\n\n    handleChangeInput = (event) => {\n        if (_.isObject(event)) {\n            this.props.onChangeInput(event.target.value, event)\n            this.props.onChange(event.target.value, event)\n        } else {\n            this.props.onChangeInput(event)\n            this.props.onChange(event)\n        }\n    }\n\n    handleBlur = (event) => {\n        this.props.onBlur(this.props.value, event)\n    }\n\n    static Option = Option\n\n    render () {\n        const { options, disabled, value, query, onScroll, mode, isLoading, isSearch } = this.props\n\n        const selectedOption = _.find(options, { value })\n        const icon = _.get(selectedOption, 'icon')\n        const title = _.get(selectedOption, 'title')\n\n        return (\n            <Dropdown\n                mode=\"focus\"\n                onChange={this.handleChangeOption}\n                disabled={disabled}\n                theme={dropdownTheme}\n                value={value}\n            >\n                <TargetInput\n                    {...this.props}\n                    value={title || query || value}\n                    onChange={this.handleChangeInput}\n                    icon={icon}\n                    mode={isSearch ? 'search' : void 0}\n                    onFocus={this.handleFocus}\n                    onBlur={this.handleBlur}\n                    theme={inputTheme}\n                    withOptions={!mode && !!options.length}\n                />\n                <Dropdown.Contents\n                    theme={contentsTheme}\n                    align={Dropdown.utils.autoLeftCheckByWindow}\n                    onScroll={onScroll}\n                >\n                    {this.getModeRender()}\n                    {isLoading && !mode &&\n                    <div className={defaultTheme.additionalInfo}>\n                        <Loader.Button theme={loaderTheme} />\n                    </div>\n                    }\n                </Dropdown.Contents>\n            </Dropdown>\n        )\n    }\n}\n\nexport default Suggest\n"],"names":["Suggest","props","options","value","query","onRetry","mode","iconFromCode","translations","requestTimeout","repeat","noMatches","requestError","_","map","optionValue","title","description","icon","optionThemeWithIcon","optionTheme","event","onFocus","onChangeOption","onChange","isObject","onChangeInput","target","onBlur","disabled","onScroll","isLoading","isSearch","selectedOption","find","get","handleChangeOption","dropdownTheme","handleChangeInput","handleFocus","handleBlur","inputTheme","length","contentsTheme","Dropdown","utils","autoLeftCheckByWindow","getModeRender","defaultTheme","additionalInfo","loaderTheme","React","Component","TargetInput","Long","NoMatches","Error","PropTypes","string","func","oneOf","bool","error","placeholder","shape","inputComponent","arrayOf","isRequired","noop","Option"],"mappings":"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"}