{"version":3,"file":"contents.js","sources":["../../src/dropdown/contents.jsx"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\nimport classnames from 'classnames'\n\nimport { stopPropagationHandler } from '../utils'\n\nimport { autoTopCheckByWindow, autoLeftCheckByParent, autoScroll } from './utils'\nimport defaultTheme from './style.css'\n\nconst safeCall = (func, ...args) => _.isFunction(func) ? func(...args) : func\n\nconst omitProps = [\n    'theme',\n    'verticalAlign',\n    'align',\n    'onSwitch',\n    'children',\n    'target',\n    'mode',\n    'nodeTarget',\n    'forceOpened',\n    'nodeSelectedOption',\n    'refContents',\n    'id',\n    'name'\n]\n\n/* eslint-disable valid-jsdoc, comment: некорректный парсинг jsdoc */\n/**\n * [Zeplin](https://app.zeplin.io/project/59312e1ebdf1da6fc8d37ffb/dashboard?q=dropdown)\n * Технический компонент, указатель на непосредственно выпадающий список\n *\n * @param {Object} props - свойства компонента\n * @return {JSX} - компонент\n */\nexport class Contents extends React.PureComponent {\n    static propTypes = {\n        children: PropTypes.node,\n        theme: PropTypes.object,\n        /**\n         * Горизонтальное выравнивание Contents относительно Target\n         */\n        align: PropTypes.oneOfType([ // eslint-disable-line react/no-unused-prop-types, comment: вообще используется как newProps\n            PropTypes.func,\n            PropTypes.oneOf(['left', 'right'])\n        ]),\n        /**\n         * Вертикальное выравнивание Contents относительно Target\n         */\n        verticalAlign: PropTypes.oneOfType([ // eslint-disable-line react/no-unused-prop-types, comment: вообще используется как newProps\n            PropTypes.func,\n            PropTypes.oneOf(['top', 'bottom'])\n        ]),\n        onClick: PropTypes.func,\n        mode: PropTypes.oneOf(['focus', 'click', 'none']),\n        /**\n         * Dropdown передает самостоятельно\n         */\n        nodeTarget: PropTypes.object, // eslint-disable-line react/no-unused-prop-types, comment: вообще используется как newProps\n        /**\n         * Dropdown передает самостоятельно\n         */\n        nodeSelectedOption: PropTypes.object,\n        forceOpened: PropTypes.bool,\n        refContents: PropTypes.func,\n        /**\n         * Параметры для native dropdown\n         */\n        id: PropTypes.string,\n        name: PropTypes.string,\n        onChange: PropTypes.func,\n        value: PropTypes.string\n    }\n\n    static defaultProps = {\n        children: void 0,\n        theme: defaultTheme,\n        align: autoLeftCheckByParent,\n        verticalAlign: autoTopCheckByWindow,\n        onClick: _.noop,\n        mode: 'click',\n        nodeTarget: void 0,\n        nodeSelectedOption: void 0,\n        forceOpened: false,\n        refContents: _.noop,\n\n        id: void 0,\n        name: void 0,\n        onChange: _.noop,\n        value: void 0\n    }\n\n    // eslint-disable-next-line babel/camelcase, comment: React UNSAFE method\n    UNSAFE_componentWillReceiveProps (nextProps) {\n        if (!this.props.forceOpened && nextProps.forceOpened) {\n            const savedDisplay = _.get(this.contents, 'parentNode.style.display')\n            this.setDisplay('block')\n            this.verticalAlign = safeCall(nextProps.verticalAlign, this.contents, nextProps.nodeTarget)\n            this.align = safeCall(nextProps.align, this.contents, nextProps.nodeTarget)\n            this.setDisplay(savedDisplay)\n        }\n\n        if (nextProps.nodeSelectedOption && this.props.nodeSelectedOption !== nextProps.nodeSelectedOption) {\n            autoScroll(nextProps.nodeSelectedOption, this.contentsView)\n        }\n    }\n\n    setRefContents = (component) => {\n        this.contents = component\n    }\n\n    setRefContentsView = (component) => {\n        this.contentsView = component\n        this.props.refContents(component)\n    }\n\n    setDisplay = (value) => {\n        if (this.contents) {\n            this.contents.parentNode.style.display = value\n        }\n    }\n\n    verticalAlign = 'bottom'\n    align = 'left'\n\n    render () {\n        const { theme, children, onClick, forceOpened, mode } = this.props\n\n        const passedProps = _(this.props)\n            .omit(omitProps)\n            .extend({\n                className: classnames(theme.contents, theme[this.verticalAlign], theme[this.align], forceOpened && theme.opened),\n                'data-unit': 'dropdown:bubble',\n                onClick: stopPropagationHandler(onClick),\n                role: mode ? 'listbox' : void 0\n            })\n            .value()\n\n\n        return (\n            <div {...passedProps}>\n                <div\n                    className={theme.contentsWrapper}\n                    ref={this.setRefContents}\n                    data-unit=\"dropdown:contents\"\n                >\n                    <div ref={this.setRefContentsView} className={theme.contentsView}>\n                        {children}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nContents.displayName = 'Dropdown.Contents'\n"],"names":["safeCall","func","args","_","isFunction","omitProps","Contents","component","contents","contentsView","props","refContents","value","parentNode","style","display","nextProps","forceOpened","savedDisplay","get","setDisplay","verticalAlign","nodeTarget","align","nodeSelectedOption","autoScroll","theme","children","onClick","mode","passedProps","omit","extend","className","classnames","opened","stopPropagationHandler","role","contentsWrapper","setRefContents","setRefContentsView","React","PureComponent","PropTypes","node","object","oneOfType","oneOf","bool","id","string","name","onChange","defaultTheme","autoLeftCheckByParent","autoTopCheckByWindow","noop","displayName"],"mappings":"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"}