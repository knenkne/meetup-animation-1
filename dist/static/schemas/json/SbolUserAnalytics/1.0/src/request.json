{
  "id": "SbolUserAnalytics/1.0/request.json",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "description": "Standard chunk for sending user analytics events",
  "additionalProperties": false,
  "properties": {
    "meta": {
      "type": "object",
      "description": "Meta information about device",
      "additionalProperties": false,
      "properties": {
        "apiKey": {
          "description": "Unique identifier of the application",
          "type": "string",
          "maxLength": 255
        },
        "deviceVendor": {
          "description": "Device manufacturer",
          "type": "string",
          "maxLength": 255
        },
        "deviceModel": {
          "description": "Device model",
          "type": "string",
          "maxLength": 255
        },
        "deviceMemorySize": {
          "description": "Device memory size",
          "type": "string",
          "maxLength": 32
        },
        "operationSystem": {
          "description": "Operation system of the device",
          "type": "string",
          "maxLength": 255
        },
        "operationSystemVersion": {
          "description": "Operation system version of the device",
          "type": "string",
          "maxLength": 32
        },
        "platform": {
          "description": "Platform (ex. mobile, web, tablet)",
          "type": "string",
          "maxLength": 255,
          "enum": [
            "MOBILE",
            "WEB",
            "TABLET"
          ]
        },
        "systemLanguage": {
          "description": "Language set on the device",
          "type": "string",
          "maxLength": 32
        },
        "screenSize": {
          "description": "Screen size of the device",
          "type": "string",
          "maxLength": 32
        },
        "browser": {
          "description": "Browser name",
          "type": "string",
          "maxLength": 255
        },
        "timeStamp": {
          "description": "Device/browser timestamp of the sent chunk in ISO 8601 format (YYYY-MM-DDThh:mm:ss.sss±hh:mm)",
          "type": "string",
          "format": "date-time",
          "maxLength": 32
        }
      },
      "required": [
        "platform",
        "systemLanguage",
        "timeStamp"
      ]
    },
    "profile": {
      "type": "object",
      "description": "Static information about application where library is used",
      "additionalProperties": false,
      "properties": {
        "deviceId": {
          "description": "Client device ID, could be changed after reinstalling",
          "type": "string",
          "maxLength": 255
        },
        "sessionId": {
          "description": "ERIB session ID",
          "type": "string",
          "maxLength": 255
        },
        "hashUserLoginId": {
          "description": "User Login ID ERIB hash md5",
          "type": "string",
          "maxLength": 255
        },
        "hashEfsId": {
          "description": "User ID EFS hash",
          "type": "string",
          "maxLength": 255
        },
        "hashEpkId": {
          "description": "User ID EPK hash",
          "type": "string",
          "maxLength": 255
        },
        "clientBlock": {
          "description": "ERIB block of client data",
          "type": "string",
          "maxLength": 64
        },
        "appVersion": {
          "description": "Application version",
          "type": "string",
          "maxLength": 16
        },
        "applicationLanguage": {
          "description": "Application language",
          "type": "string",
          "maxLength": 16
        }
      }
    },
    "data": {
      "description": "Block for gathered user events",
      "type": "array",
      "additionalItems": false,
      "minItems": 1,
      "maxItems": 128,
      "items": {
        "type": "object",
        "description": "User analytics event object",
        "additionalProperties": false,
        "properties": {
          "eventCategory": {
            "description": "User event category",
            "type": "string",
            "maxLength": 255
          },
          "eventAction": {
            "description": "Name of the user event",
            "type": "string",
            "maxLength": 1024
          },
          "eventType": {
            "description": "User event type. Ex. tap/swipe/show",
            "type": "string",
            "maxLength": 255
          },
          "value": {
            "description": "Value of the field where was triggered event",
            "type": "string",
            "maxLength": 255
          },
          "timeStamp": {
            "description": "Device/browser timestamp of the user event in ISO 8601 format (YYYY-MM-DDThh:mm:ss.sss±hh:mm)",
            "type": "string",
            "format": "date-time",
            "maxLength": 32
          },
          "geoLatitude": {
            "description": "Latitude of device position",
            "type": "string",
            "maxLength": 32
          },
          "geoLongitude": {
            "description": "Longitude of device position",
            "type": "string",
            "maxLength": 32
          },
          "cellularProvider": {
            "description": "Cellular provider of the connection",
            "type": "string",
            "maxLength": 128
          },
          "connectionType": {
            "description": "Internet connection type of the device",
            "type": "string",
            "enum": [
              "WIFI",
              "CELLULAR",
              "BLUETOOTH",
              "ETHERNET",
              "UNKNOWN"
            ]
          },
          "batteryLevel": {
            "description": "Device battery level",
            "type": "string",
            "maxLength": 32
          },
          "internalIP": {
            "description": "IP-address of the device in the internal net",
            "type": "string",
            "maxLength": 32
          },
          "properties": {
            "description": "Additional custom properties for event",
            "type": "array",
            "additionalItems": false,
            "minItems": 1,
            "maxItems": 16,
            "items": {
              "key": {
                "description": "property name",
                "type": "string",
                "maxLength": 255
              },
              "value": {
                "description": "property value",
                "type": "string",
                "maxLength": 255
              }
            }
          }
        },
        "required": [
          "eventAction",
          "timeStamp"
        ]
      }
    }
  },
  "required": [
    "meta",
    "profile",
    "data"
  ]
}