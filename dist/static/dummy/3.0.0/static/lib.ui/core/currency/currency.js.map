{"version":3,"file":"currency.js","sources":["../../src/currency/currency.jsx"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\nimport classnames from 'classnames'\n\nimport { pluralize } from '../utils'\n\nimport { options, setCurrencyDisplayName } from './options'\nimport defaultTheme from './style.css'\n\nconst hasFallback = (code) => _.has(options.display, _.lowerCase(code))\nconst hasSymbol = (code) => _.has(options.symbols, _.lowerCase(code))\n\nconst isSymbol = (code, mode) => {\n    switch (mode) {\n        case 'code':\n        case 'word':\n            return false\n        case 'symbol':\n            return hasSymbol(code)\n        default:\n            return !hasFallback(code) && hasSymbol(code)\n    }\n}\n\nconst getCurrencyValue = (code, mode = 'auto', value = 0) => {\n    if (mode === 'code') {\n        return code\n    } else if ((mode === 'word' || mode === 'auto') && hasFallback(code)) {\n        return pluralize(options.display[_.lowerCase(code)], value)\n    } else if ((mode === 'symbol' || mode === 'auto') && hasSymbol(code)) {\n        return options.symbols[_.lowerCase(code)]\n    }\n\n    return code\n}\n\n/**\n * Централизованный компонент для _вывода_ символа/текста валюты\n *\n * @param {Object} props - свойства компонента\n * @return {JSX} - компонент\n */\nexport function Currency (props) {\n    const passedProps = _(props)\n        .omit([\n            'value',\n            'currencyCode',\n            'asSymbol',\n            'mode',\n            'theme',\n            'title'\n        ])\n        .extend({\n            'data-unit': 'currency',\n            className: classnames(\n                props.theme.currency,\n                { [props.theme.symbol]: isSymbol(props.title, props.mode) }\n            )\n        })\n        .value()\n\n    return (\n        <span {...passedProps}>\n            {getCurrencyValue(props.title, props.mode, props.value)}\n        </span>\n    )\n}\n\nCurrency.propTypes = {\n    theme: PropTypes.object,\n    /**\n     * Только для mode=\"auto\" или \"word\" с Currency.setCurrencyDisplayName\n     */\n    value: PropTypes.string,\n    title: PropTypes.string,\n    mode: PropTypes.oneOf(['auto', 'symbol', 'word', 'code'])\n}\n\nCurrency.defaultProps = {\n    theme: defaultTheme,\n    value: '1',\n    title: void 0,\n    mode: 'auto'\n}\n\nCurrency.theme = defaultTheme\nCurrency.options = options\nCurrency.setCurrencyDisplayName = setCurrencyDisplayName\nCurrency.getCurrencyValue = getCurrencyValue\nCurrency.displayName = 'Currency'\nexport default Currency\n"],"names":["hasFallback","code","_","has","options","display","lowerCase","hasSymbol","symbols","isSymbol","mode","getCurrencyValue","value","pluralize","Currency","props","passedProps","omit","extend","className","classnames","theme","currency","symbol","title","propTypes","PropTypes","object","string","oneOf","defaultProps","defaultTheme","setCurrencyDisplayName","displayName"],"mappings":"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"}