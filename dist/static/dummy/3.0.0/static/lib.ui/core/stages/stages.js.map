{"version":3,"file":"stages.js","sources":["../../src/stages/stages.jsx"],"sourcesContent":["import React, { useMemo, useRef, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport cn from 'classnames'\n\nimport { deprecate } from '../utils/hoc/deprecate'\nimport { FullWidth } from '../full-width'\nimport { isDesktopViewport, isPhoneViewport } from '../utils/adaptive'\n\nimport { Step } from './step'\nimport { Progress } from './progress'\nimport defaultTheme from './style.css'\n\nconst CENTERED_COUNT = 2\nconst DESKTOP_OFFSET = 160\nconst MOBILE_OFFSET = 128\nconst OFFSET = isPhoneViewport() ? MOBILE_OFFSET : DESKTOP_OFFSET\n\n/**\n * [Zeplin](https://app.zeplin.io/project/5c74ef0d753f3ebccdf8f33d/screen/5ca7884a65b9d234eaf140ae)\n * Компонент для вывода шагов движения по процессу.\n *\n * @param {Object} props - Свойства компонента.\n * @return {JSX} - Компонент.\n */\nexport const Stages = ({\n    children,\n    translations,\n    avaLink,\n    theme,\n    ...props\n}) => {\n    const mobileCentered = React.Children.count(children) <= CENTERED_COUNT\n\n    const currIndex = useMemo(\n        () => React.Children.toArray(children).findIndex((child) => child.props.mode)\n        , [children])\n\n    const containerRef = useRef()\n\n    useEffect(() => {\n        if (!isDesktopViewport() && containerRef?.current) {\n            containerRef.current.scrollTo({\n                left: (currIndex - 1) * OFFSET,\n                behavior: 'smooth'\n            })\n        }\n    }, [currIndex])\n\n    const mainComponent = (\n        <ul\n            {...props}\n            className={cn(theme.stages, mobileCentered && theme.centered)}\n        >\n            {React.Children.map(children, (StepChildren, index) =>\n                React.cloneElement(StepChildren, {\n                    value: index + 1,\n                    translations,\n                    avaLink\n                })\n            )}\n\n            {!isDesktopViewport() && !mobileCentered && (\n                <li className={theme.emptyStep} />\n            )}\n        </ul>\n    )\n\n    if (isDesktopViewport()) {\n        return mainComponent\n    }\n\n    return (\n        <FullWidth>\n            <div className={theme.scroll} ref={containerRef}>\n                <FullWidth.Inner>{mainComponent}</FullWidth.Inner>\n            </div>\n        </FullWidth>\n    )\n}\n\nStages.propTypes = {\n    children: PropTypes.node.isRequired,\n    /**\n     * Содержит переводы для компонента.\n     */\n    translations: PropTypes.shape({\n        tooltip: PropTypes.string.isRequired\n    }).isRequired,\n    /**\n     * Ссылка на аватарку пользователя.\n     */\n    avaLink: PropTypes.string,\n    theme: PropTypes.object\n}\n\nStages.defaultProps = {\n    avaLink: void 0,\n    theme: defaultTheme\n}\n\nStages.theme = defaultTheme\nStages.Step = Step\nStages.Progress = deprecate('4.0.0', 'Stages.Progress')(Progress)\nStages.displayName = 'Stages'\n\nexport default Stages\n"],"names":["CENTERED_COUNT","DESKTOP_OFFSET","MOBILE_OFFSET","OFFSET","isPhoneViewport","Stages","children","translations","avaLink","theme","props","mobileCentered","React","Children","count","currIndex","useMemo","toArray","findIndex","child","mode","containerRef","useRef","useEffect","isDesktopViewport","current","scrollTo","left","behavior","mainComponent","cn","stages","centered","map","StepChildren","index","cloneElement","value","emptyStep","scroll","propTypes","PropTypes","node","isRequired","shape","tooltip","string","object","defaultProps","defaultTheme","Step","Progress","deprecate","displayName"],"mappings":"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"}