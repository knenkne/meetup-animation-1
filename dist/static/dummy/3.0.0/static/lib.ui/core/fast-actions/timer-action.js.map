{"version":3,"file":"timer-action.js","sources":["../../src/fast-actions/timer-action.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport { FastAction } from './fast-action'\n\nconst SECONDS = 60\nconst MILLISECONDS = 1000\nconst parseTimer = (timer) => {\n    const minutes = (timer - (timer % SECONDS)) / SECONDS\n    const seconds = _.padStart(timer % SECONDS, 2, 0)\n    return `${minutes}:${seconds}`\n}\n\nexport const TimerAction = ({ initialValue, value, title, timerTitle, onClick, ...props }) => {\n    const [timer, setTimer] = useState(initialValue)\n\n    useEffect(() => {\n        const timerID = setInterval(() => {\n            if (timer) {\n                setTimer(timer - 1)\n            } else {\n                clearInterval(timerID)\n            }\n        }, MILLISECONDS)\n\n        return () => {\n            clearInterval(timerID)\n        }\n    })\n\n    const handleClick = useCallback(() => {\n        setTimer(value)\n        onClick()\n    })\n\n    return (\n        <FastAction\n            title={timer ? `${timerTitle} ${parseTimer(timer)}` : title}\n            onClick={timer ? void '' : handleClick}\n            {...props}\n        />\n    )\n}\n\nTimerAction.propTypes = {\n    /**\n     * Передавайте значение, если таймер должен быть выставлен сразу\n     */\n    initialValue: PropTypes.number,\n    value: PropTypes.number.isRequired,\n    title: PropTypes.string.isRequired,\n    timerTitle: PropTypes.string,\n    onClick: PropTypes.func.isRequired,\n    href: PropTypes.string,\n    icon: PropTypes.string,\n    imageSrc: PropTypes.string,\n    description: PropTypes.string,\n    as: PropTypes.oneOf([PropTypes.string, PropTypes.func])\n}\n\nTimerAction.defaultProps = {\n    initialValue: 0,\n    href: void '',\n    timerTitle: '',\n    onClick: void '',\n    icon: void '',\n    imageSrc: void '',\n    description: void '',\n    as: void ''\n}\n\nTimerAction.displayName = 'FastActions.TimerAction'\n\nexport default TimerAction\n"],"names":["SECONDS","MILLISECONDS","parseTimer","timer","minutes","seconds","_","padStart","TimerAction","initialValue","value","title","timerTitle","onClick","props","useState","setTimer","useEffect","timerID","setInterval","clearInterval","handleClick","useCallback","propTypes","PropTypes","number","isRequired","string","func","href","icon","imageSrc","description","as","oneOf","defaultProps","displayName"],"mappings":"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"}