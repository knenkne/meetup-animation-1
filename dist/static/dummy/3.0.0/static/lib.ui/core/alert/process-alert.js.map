{"version":3,"file":"process-alert.js","sources":["../../src/alert/process-alert.jsx"],"sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport _ from 'lodash'\r\nimport classnames from 'classnames'\r\n\r\nimport { Icon } from '../icon'\r\n\r\nimport { Description } from './description'\r\nimport { Actions } from './actions'\r\nimport defaultTheme from './process-style.css'\r\n\r\nconst iconMap = {\r\n    success: 'icon:core/common/alert-success',\r\n    info: 'icon:core/common/alert-info',\r\n    error: 'icon:core/common/alert-error',\r\n    draft: 'icon:core/common/alert-draft',\r\n    warning: 'icon:core/common/alert-draft'\r\n}\r\n\r\nconst iconTheme = { self: classnames(Icon.theme.self, defaultTheme.icon) }\r\n\r\n/**\r\n * [Zeplin](https://app.zeplin.io/project/5c74ef0d753f3ebccdf8f33d?seid=5ca761ce7afbd0be3d4613c0)\r\n *\r\n * @param {Object} props - свойства компонента\r\n * @return {JSX} - компонент\r\n */\r\nexport class ProcessAlert extends React.PureComponent {\r\n    titleId = _.uniqueId('alert-process-title-')\r\n    descriptionId = _.uniqueId('alert-process-description-')\r\n\r\n    render () {\r\n        const { title, mode, children, a11y } = this.props\r\n\r\n        const hasChildren = React.Children.toArray(children).some(Boolean)\r\n        const extend = {\r\n            className: classnames(defaultTheme.alert, defaultTheme[mode]),\r\n            'data-unit': `process:alert:${mode}`,\r\n            role: _.get(a11y, 'role', 'alert'),\r\n            'aria-describedby': this.descriptionId\r\n        }\r\n\r\n        if (title) {\r\n            extend['aria-labelledby'] = this.titleId\r\n        } else {\r\n            extend['aria-label'] = a11y.title\r\n        }\r\n\r\n        const passedProps = _(this.props)\r\n            .omit(this.props, [\r\n                'title',\r\n                'mode',\r\n                'children',\r\n                'a11y',\r\n                'size'\r\n            ])\r\n            .extend(extend)\r\n            .value()\r\n\r\n        return (\r\n            <div className={defaultTheme.wrapper}>\r\n                <div {...passedProps}>\r\n                    <Icon theme={iconTheme} name={iconMap[mode]} size=\"self\" />\r\n                    {title &&\r\n                    <h3\r\n                        data-unit=\"process:alert:title\"\r\n                        className={classnames(defaultTheme.title, !hasChildren && defaultTheme.offset)}\r\n                        id={this.titleId}\r\n                    >\r\n                        {title}\r\n                    </h3>\r\n                    }\r\n                    {React.Children.map(children, (child) => {\r\n                        if (_.get(child, 'type.displayName') === Description.displayName) {\r\n                            return React.cloneElement(child, _.extend({}, child.props, { id: this.descriptionId }))\r\n                        }\r\n\r\n                        return child\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nProcessAlert.propTypes = {\r\n    mode: PropTypes.oneOf([\r\n        'success',\r\n        'info',\r\n        'error',\r\n        'draft',\r\n        'warning'\r\n    ]).isRequired,\r\n    title: PropTypes.string,\r\n    children: PropTypes.node,\r\n    a11y: PropTypes.shape({\r\n        /**\r\n         * Текст, который должен описывать Alert.Process на тот случай, если title у компонента отсутствует. Не передавать, если props.title есть\r\n         */\r\n        title: PropTypes.string,\r\n        /**\r\n         * Роль алерта под замену\r\n         */\r\n        role: PropTypes.string\r\n    }).isRequired\r\n}\r\n\r\nProcessAlert.defaultProps = {\r\n    title: void 0,\r\n    children: void 0\r\n}\r\n\r\nProcessAlert.theme = defaultTheme\r\nProcessAlert.Description = Description\r\nProcessAlert.Actions = Actions\r\nProcessAlert.displayName = 'Alert.Process'\r\n"],"names":["iconMap","success","info","error","draft","warning","iconTheme","self","classnames","Icon","theme","defaultTheme","icon","ProcessAlert","_","uniqueId","props","title","mode","children","a11y","hasChildren","React","Children","toArray","some","Boolean","extend","className","alert","role","get","descriptionId","titleId","passedProps","omit","value","wrapper","offset","map","child","Description","displayName","cloneElement","id","PureComponent","propTypes","PropTypes","oneOf","isRequired","string","node","shape","defaultProps","Actions"],"mappings":"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"}