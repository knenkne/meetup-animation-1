{"version":3,"file":"item.js","sources":["../../src/accordion/item.jsx"],"sourcesContent":["import React, { useState, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport cs from 'classnames'\nimport _ from 'lodash'\nimport { Collapse } from 'react-collapse'\n\nimport { memoizeFuncWithArgs, mergeTheme } from '../utils'\nimport { Icon } from '../icon'\nimport { Typography } from '../typography'\n\nimport defaultTheme from './style.css'\n\nconst omitProps = [\n    'title',\n    'description',\n    'children',\n    'forceOpened',\n    'onChange',\n    'onKeyDown',\n    'id',\n    'aria-level',\n    'warning',\n    'collapsible',\n    'as',\n    'theme'\n]\n\nexport const extendedHeadlineTheme = mergeTheme(Typography.theme, {\n    headline: cs(Typography.theme.h4, defaultTheme.headline)\n})\n\n// eslint-disable-next-line complexity, comment: complexity of 15\nexport const Item = (props) => {\n    const { title, children, icon, forceOpened, mode, onChange, onKeyDown, id, 'aria-level': ariaLevel, as, warning, description, collapsible, theme } = props\n    const [active, updateState] = useState(forceOpened)\n\n    const handleOnchange = useCallback(\n        () => {\n            updateState(!active)\n            onChange(title)\n        })\n\n    // вычисляем открывать или не открывать для кейсов, когда могут быть открыты несколько итемов\n    const isOpened = collapsible ? active : forceOpened\n\n    const headingContent = React.useMemo(() => {\n        if (mode === 'widget') {\n            return (\n                <>\n                    <span className={cs(Typography.theme.bodySemibold, theme.text)}>\n                        {title}\n                    </span>\n                    <div className={theme.sideTitle}>\n                        {as && (\n                            <div className={Typography.theme.bodySemibold}>{as}</div>\n                        )}\n                    </div>\n                    <div className={cs(theme.arrow, isOpened && theme.arrowOpened)}>\n                        <Icon name=\"icon:core/common/down-arrow\" />\n                    </div>\n                </>\n            )\n        }\n\n        if (mode === 'classic') {\n            return (\n                <Typography.Headline mode=\"h4\" theme={extendedHeadlineTheme}>\n                    <span className={theme.titleText}>{title}</span>\n                </Typography.Headline>\n            )\n        }\n\n        return (\n            <>\n                <div className={theme.headingContent}>\n                    {icon &&\n                        <div className={theme.icon}>\n                            <Icon name={icon} size=\"self\" />\n                        </div>\n                    }\n                    <div className={theme.headingWrapper}>\n                        <Typography.Headline mode=\"h4\" theme={extendedHeadlineTheme}>\n                            {title}\n                        </Typography.Headline>\n                        {description &&\n                            <div className={theme.description}>{description}</div>\n                        }\n                    </div>\n                    <div className={cs(theme.arrow, isOpened && theme.arrowOpened)}>\n                        <Icon name=\"icon:core/common/down-arrow\" />\n                    </div>\n                </div>\n\n                <div className={theme.sideTitle}>\n                    {as && (\n                        <div className={Typography.theme.bodySemibold}>{as}</div>\n                    )}\n                </div>\n            </>\n        )\n    }, [mode, isOpened])\n\n    return (\n        <div\n            {..._.omit(props, omitProps)}\n            className={cs(\n                theme.item,\n                theme[`item${`-${mode}`}`],\n                isOpened && theme.active,\n                warning && theme.warning)}\n        >\n            <div role=\"heading\" aria-level={ariaLevel} className={theme.heading}>\n                <button\n                    onClick={handleOnchange}\n                    onKeyDown={memoizeFuncWithArgs(onKeyDown, title)}\n                    className={theme.title}\n                    type=\"button\"\n                    aria-expanded={isOpened}\n                    aria-controls={`${id}-section`}\n                    id={`${id}-title`}\n                >\n                    {headingContent}\n                </button>\n            </div>\n            <div\n                className={theme.collapseWrapper}\n                id={`${id}-section`}\n                role=\"region\"\n                aria-labelledby={`${id}-title`}\n            >\n                <Collapse\n                    isOpened={isOpened}\n                >\n                    <div\n                        className={cs(theme.content, !isOpened && theme.contentHidden)}\n                        aria-hidden={!isOpened}\n                    >\n                        {children}\n                    </div>\n                </Collapse>\n            </div>\n        </div>\n    )\n}\n\nItem.propTypes = {\n    title: PropTypes.string.isRequired,\n    description: PropTypes.string,\n    children: PropTypes.node.isRequired,\n    id: PropTypes.string,\n    forceOpened: PropTypes.bool,\n    mode: PropTypes.oneOf(['widget', 'info', 'description', 'classic']),\n    onChange: PropTypes.func,\n    onKeyDown: PropTypes.func,\n    'aria-level': PropTypes.string,\n    /**\n     * Для mode: widget, индикация негативного контента\n     */\n    warning: PropTypes.bool,\n    collapsible: PropTypes.bool,\n    as: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.node]),\n    icon: PropTypes.string,\n    theme: PropTypes.object\n}\n\nItem.defaultProps = {\n    id: void 0,\n    description: void 0,\n    forceOpened: false,\n    mode: 'classic',\n    onChange: _.noop,\n    onKeyDown: _.noop,\n    'aria-level': void '',\n    warning: false,\n    collapsible: false,\n    as: void 0,\n    icon: void 0,\n    theme: defaultTheme\n}\n\nItem.displayName = 'Accordion.Item'\n"],"names":["omitProps","extendedHeadlineTheme","mergeTheme","Typography","theme","headline","cs","h4","defaultTheme","Item","props","title","children","icon","forceOpened","mode","onChange","onKeyDown","id","ariaLevel","as","warning","description","collapsible","useState","active","updateState","handleOnchange","useCallback","isOpened","headingContent","React","useMemo","bodySemibold","text","sideTitle","arrow","arrowOpened","titleText","headingWrapper","_","omit","item","heading","memoizeFuncWithArgs","collapseWrapper","content","contentHidden","propTypes","PropTypes","string","isRequired","node","bool","oneOf","func","oneOfType","object","defaultProps","noop","displayName"],"mappings":"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"}