{"version":3,"file":"combobox-wrapped.js","sources":["../../src/combobox/combobox-wrapped.jsx"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport { Combobox } from './combobox'\n\nconst omitProps = ['onChange', 'options']\n\nexport class ComboboxWrapped extends React.Component {\n    static propTypes = {\n        onChange: PropTypes.func.isRequired,\n        /**\n         * Справочник подстановки\n         */\n        options: PropTypes.arrayOf(PropTypes.shape({\n            title: PropTypes.string,\n            description: PropTypes.string,\n            value: PropTypes.string.isRequired,\n            icon: PropTypes.string\n        }))\n    }\n\n    static defaultProps = {\n        options: [],\n    }\n\n    state = {\n        filtered: this.props.options\n    }\n\n    getFiltered = (options, query) => {\n        if (!query) {\n            return []\n        }\n        const formattedQuery = query.toLowerCase()\n        return _.filter(options, (option) => _.startsWith(option.title?.toLowerCase(), formattedQuery))\n    }\n\n    handleChangeInput = (query) => {\n        const { onChange, options } = this.props\n\n        if (options) {\n            this.setState({\n                filtered: this.getFiltered(options, query)\n            })\n        }\n\n        onChange({ query })\n    }\n\n    handleChangeOption = (value, query) => {\n        const { onChange } = this.props\n\n        onChange({ value, query })\n    }\n\n    render () {\n        const { filtered } = this.state\n\n        return (\n            <Combobox\n                onChangeOption={this.handleChangeOption}\n                onChangeInput={this.handleChangeInput}\n                options={filtered}\n                {..._.omit(this.props, omitProps)}\n            />\n        )\n    }\n}\n\n\nexport default ComboboxWrapped\n"],"names":["omitProps","ComboboxWrapped","filtered","props","options","query","formattedQuery","toLowerCase","_","filter","option","startsWith","title","onChange","setState","getFiltered","value","state","handleChangeOption","handleChangeInput","omit","React","Component","PropTypes","func","isRequired","arrayOf","shape","string","description","icon"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA,IAAMA,SAAS,GAAG,CAAC,UAAD,EAAa,SAAb,CAAlB;IAEaC,eAAb;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA,4DAkBY;AACJC,MAAAA,QAAQ,EAAE,MAAKC,KAAL,CAAWC;AADjB,KAlBZ;;AAAA,kEAsBkB,UAACA,OAAD,EAAUC,KAAV,EAAoB;AAC9B,UAAI,CAACA,KAAL,EAAY;AACR,eAAO,EAAP;AACH;;AACD,UAAMC,cAAc,GAAGD,KAAK,CAACE,WAAN,EAAvB;AACA,aAAOC,CAAC,CAACC,MAAF,CAASL,OAAT,EAAkB,UAACM,MAAD;AAAA;;AAAA,eAAYF,CAAC,CAACG,UAAF,kBAAaD,MAAM,CAACE,KAApB,kDAAa,cAAcL,WAAd,EAAb,EAA0CD,cAA1C,CAAZ;AAAA,OAAlB,CAAP;AACH,KA5BL;;AAAA,wEA8BwB,UAACD,KAAD,EAAW;AAAA,wBACG,MAAKF,KADR;AAAA,UACnBU,QADmB,eACnBA,QADmB;AAAA,UACTT,OADS,eACTA,OADS;;AAG3B,UAAIA,OAAJ,EAAa;AACT,cAAKU,QAAL,CAAc;AACVZ,UAAAA,QAAQ,EAAE,MAAKa,WAAL,CAAiBX,OAAjB,EAA0BC,KAA1B;AADA,SAAd;AAGH;;AAEDQ,MAAAA,QAAQ,CAAC;AAAER,QAAAA,KAAK,EAALA;AAAF,OAAD,CAAR;AACH,KAxCL;;AAAA,yEA0CyB,UAACW,KAAD,EAAQX,KAAR,EAAkB;AAAA,UAC3BQ,QAD2B,GACd,MAAKV,KADS,CAC3BU,QAD2B;AAGnCA,MAAAA,QAAQ,CAAC;AAAEG,QAAAA,KAAK,EAALA,KAAF;AAASX,QAAAA,KAAK,EAALA;AAAT,OAAD,CAAR;AACH,KA9CL;;AAAA;AAAA;;AAAA;AAAA;AAAA,6BAgDc;AAAA,UACEH,QADF,GACe,KAAKe,KADpB,CACEf,QADF;AAGN,0BACI,oBAAC,QAAD;AACI,QAAA,cAAc,EAAE,KAAKgB,kBADzB;AAEI,QAAA,aAAa,EAAE,KAAKC,iBAFxB;AAGI,QAAA,OAAO,EAAEjB;AAHb,SAIQM,CAAC,CAACY,IAAF,CAAO,KAAKjB,KAAZ,EAAmBH,SAAnB,CAJR,EADJ;AAQH;AA3DL;;AAAA;AAAA,EAAqCqB,KAAK,CAACC,SAA3C;;gBAAarB,8BACU;AACfY,EAAAA,QAAQ,EAAEU,SAAS,CAACC,IAAV,CAAeC,UADV;;AAEf;AACR;AACA;AACQrB,EAAAA,OAAO,EAAEmB,SAAS,CAACG,OAAV,CAAkBH,SAAS,CAACI,KAAV,CAAgB;AACvCf,IAAAA,KAAK,EAAEW,SAAS,CAACK,MADsB;AAEvCC,IAAAA,WAAW,EAAEN,SAAS,CAACK,MAFgB;AAGvCZ,IAAAA,KAAK,EAAEO,SAAS,CAACK,MAAV,CAAiBH,UAHe;AAIvCK,IAAAA,IAAI,EAAEP,SAAS,CAACK;AAJuB,GAAhB,CAAlB;AALM;;gBADV3B,iCAca;AAClBG,EAAAA,OAAO,EAAE;AADS;;;;;"}