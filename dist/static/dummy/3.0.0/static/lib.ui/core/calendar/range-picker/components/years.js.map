{"version":3,"file":"years.js","sources":["../../../../src/calendar/range-picker/components/years.jsx"],"sourcesContent":["import React, { useState, useCallback } from 'react'\nimport _ from 'lodash'\nimport cn from 'classnames'\nimport PropTypes from 'prop-types'\nimport {\n    format,\n    isSameYear,\n    subYears,\n    setYear,\n    startOfYear,\n    endOfYear,\n} from 'date-fns'\n\nimport { LOCALE, QUARTER_LENGTH } from '../../constants'\nimport Navigation from '../../components/common/navigation'\nimport { fullISOFormat, getItemsYears, getYearsTitle } from '../../utils'\nimport SquareButton from '../../components/common/square-button'\nimport buttonStyle from '../../components/common/square-button.css'\nimport commonTableStyles from '../../components/common/table.css'\nimport navigationStyle from '../../components/common/navigation.css'\n\nimport commonStyle from './common.css'\nimport style from './years.css'\n\nconst PERIOD = 10\nconst LAST_DECADE = 9990\n\nconst Years = (props) => {\n    const {\n        viewDate,\n        restriction,\n        setMonthMode,\n        setViewDate,\n        setFocusBack\n    } = props\n\n    const [currentYear, setCurrentYear] = useState(viewDate)\n    const handleChangePeriod = (period) => (e) => {\n        e.preventDefault()\n        setFocusBack()\n\n        setCurrentYear(fullISOFormat(subYears(currentYear, period)))\n    }\n\n    const handlePrevClick = handleChangePeriod(PERIOD)\n    const handleNextClick = handleChangePeriod(-PERIOD)\n\n    const years = getItemsYears(currentYear, QUARTER_LENGTH)\n    const isLastDecade = _.get(years, ['0', '0']).getFullYear() === LAST_DECADE\n\n    const handleChangeViewDate = useCallback((date) => {\n        const parsedDate = _.get(date, 'target.value', date)\n        setViewDate(fullISOFormat(setYear(viewDate, format(parsedDate, 'YYYY'))))\n        setMonthMode(date)\n    }, [])\n\n    return (\n        <div>\n            <Navigation\n                handlePrevClick={handlePrevClick}\n                handleNextClick={handleNextClick}\n                wrapperClassName={navigationStyle.navigationWrapper}\n                isLastDecade={isLastDecade}\n            >\n                {getYearsTitle(years)}\n            </Navigation>\n            <table className={cn(commonTableStyles.table, style.tableWrapper)} data-unit=\"range:months\">\n                <tbody>\n                    {_.map(years, (item, i) => (\n                        <tr key={i} className={cn(commonTableStyles.tableRow, style.tableRow)}>\n                            {_.map(item, (date, index) => {\n                                const now = Date.now()\n                                const formattedDate = fullISOFormat(date)\n                                const isDisabled = !restriction(formattedDate, {\n                                    start: startOfYear(formattedDate),\n                                    end: endOfYear(formattedDate)\n                                })\n\n                                const isToday = isSameYear(formattedDate, now)\n                                const isActive = isSameYear(formattedDate, viewDate)\n                                return (\n                                    <td\n                                        key={index}\n                                        className={cn(commonTableStyles.tableCell)}\n                                    >\n                                        <SquareButton\n                                            className={cn(\n                                                commonStyle.squareButton,\n                                                isActive && buttonStyle.itemActive,\n                                                isToday && buttonStyle.itemNow,\n                                            )}\n                                            onClick={handleChangeViewDate}\n                                            disabled={isDisabled}\n                                            value={formattedDate}\n                                            dataUnit=\"range:year\"\n                                        >\n                                            {format(formattedDate, 'YYYY', LOCALE)}\n                                        </SquareButton>\n                                    </td>\n                                )\n                            })}\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n        </div>\n    )\n}\n\nYears.propTypes = {\n    restriction: PropTypes.func,\n    setMonthMode: PropTypes.func,\n    setViewDate: PropTypes.func,\n    setFocusBack: PropTypes.func,\n    viewDate: PropTypes.string.isRequired,\n}\n\nYears.defaultProps = {\n    restriction: _.stubTrue,\n    setMonthMode: _.noop,\n    setViewDate: _.noop,\n    setFocusBack: _.noop\n}\n\nexport default Years\n"],"names":["PERIOD","LAST_DECADE","Years","props","viewDate","restriction","setMonthMode","setViewDate","setFocusBack","useState","currentYear","setCurrentYear","handleChangePeriod","period","e","preventDefault","fullISOFormat","subYears","handlePrevClick","handleNextClick","years","getItemsYears","isLastDecade","_","get","getFullYear","handleChangeViewDate","useCallback","date","parsedDate","setYear","format","navigationStyle","navigationWrapper","getYearsTitle","cn","commonTableStyles","table","style","tableWrapper","map","item","i","tableRow","index","now","Date","formattedDate","isDisabled","start","startOfYear","end","endOfYear","isToday","isSameYear","isActive","tableCell","commonStyle","squareButton","buttonStyle","itemActive","itemNow","LOCALE","propTypes","PropTypes","func","string","isRequired","defaultProps","stubTrue","noop"],"mappings":"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"}