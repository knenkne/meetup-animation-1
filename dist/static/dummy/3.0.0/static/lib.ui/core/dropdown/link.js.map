{"version":3,"file":"link.js","sources":["../../src/dropdown/link.jsx"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport _ from 'lodash'\n\nimport { Link as LinkComponent } from '../link/link'\n\nimport defaultTheme from './style.css'\n\nexport class Link extends React.Component {\n    static displayName = 'Dropdown.Link'\n\n    static propTypes = {\n        theme: PropTypes.object,\n        children: PropTypes.node,\n        title: PropTypes.string.isRequired,\n        description: PropTypes.string,\n        onClick: PropTypes.func,\n        value: PropTypes.string.isRequired,\n        translations: PropTypes.shape({\n            /**\n             * Стандартный атрибут title. Необходим для выбора валюты. Также применим, если опция шире контента.\n             */\n            title: PropTypes.string\n        }),\n        external: PropTypes.bool\n    }\n\n    static contextTypes = {\n        dropdown: PropTypes.object\n    }\n\n    static defaultProps = {\n        theme: defaultTheme,\n        onClick: _.noop,\n        children: void 0,\n        description: void 0,\n        translations: {},\n        external: false\n    }\n\n\n    componentDidMount () {\n        this.context.dropdown.registerOption(this)\n    }\n\n    componentWillUnmount () {\n        this.context.dropdown.unregisterOption(this.props.value)\n    }\n\n    getPassedProps = () => {\n        const { theme, value, translations } = this.props\n        const { getValue, getSelectedValue } = this.context.dropdown\n        let linkProps = {}\n\n        if (_.isBoolean(this.props.external)) {\n            linkProps = {\n                href: this.props.value,\n                external: this.props.external\n            }\n        }\n\n        return _(this.props)\n            .omit([\n                'theme',\n                'children',\n                'title',\n                'translations',\n                'description',\n                'selected',\n                'value'\n            ])\n            .extend({\n                tabIndex: -1,\n                'data-unit': 'dropdown:option',\n                theme: {\n                    link: classnames(theme.item, LinkComponent.theme.link, {\n                        [theme.checked]: value === getValue(),\n                        [theme.selected]: value === getSelectedValue()\n                    }),\n                    linkIconRight: theme.itemIconLink\n                },\n                onClick: this.handleClick,\n                role: 'option',\n                'aria-checked': value === getValue(),\n                'aria-selected': value === getSelectedValue(),\n                title: translations.title,\n                refWrapper: this.setRefOption\n            }, linkProps)\n            .value()\n    }\n\n    setRefOption = (component) => {\n        this.option = component\n    }\n\n    handleClick = (event) => {\n        if (event.type === 'keydown') {\n            const a = document.createElement('a')\n            a.href = this.props.value\n\n            if (this.props.external === true) {\n                a.target = '_blank'\n                a.rel = 'noopener noreferrer'\n            }\n\n            a.click()\n        }\n    }\n\n    render () {\n        const { theme, children, title, description } = this.props\n\n        return (\n            <LinkComponent {...this.getPassedProps()}>\n                {children && <span className={theme.itemIcon}>{children}</span>}\n                <span className={theme.itemTitle}>{title}</span>\n                {!_.isUndefined(description) &&\n                <span className={theme.itemDescription}>{description}</span>\n                }\n            </LinkComponent>\n        )\n    }\n}\n"],"names":["Link","props","theme","value","translations","context","dropdown","getValue","getSelectedValue","linkProps","_","isBoolean","external","href","omit","extend","tabIndex","link","classnames","item","LinkComponent","checked","selected","linkIconRight","itemIconLink","onClick","handleClick","role","title","refWrapper","setRefOption","component","option","event","type","a","document","createElement","target","rel","click","registerOption","unregisterOption","children","description","getPassedProps","itemIcon","itemTitle","isUndefined","itemDescription","React","Component","PropTypes","object","node","string","isRequired","func","shape","bool","defaultTheme","noop"],"mappings":"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"}