{"version":3,"file":"dropdown.js","sources":["../../src/dropdown/dropdown.jsx"],"sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport _ from 'lodash'\r\nimport classnames from 'classnames'\r\n\r\nimport { Perimeter } from '../perimeter'\r\nimport { disableHandler, preventHandler } from '../utils'\r\n\r\nimport { TargetButton } from './target-button'\r\nimport { Contents } from './contents'\r\nimport { Group } from './group'\r\nimport { Option } from './option'\r\nimport { Link } from './link'\r\nimport { autoLeftCheckByParent, autoLeftCheckByWindow, autoTopCheckByWindow, cyclicPrevItem, cyclicNextItem } from './utils'\r\nimport defaultTheme from './style.css'\r\n\r\nconst KEY_ENTER = 13\r\nconst KEY_ARROW_UP = 38\r\nconst KEY_ARROW_DOWN = 40\r\nconst KEY_END = 35\r\nconst KEY_HOME = 36\r\n\r\n/* eslint-disable valid-jsdoc, comment: некорректный парсинг jsdoc */\r\n/**\r\n * [Zeplin](https://app.zeplin.io/project/59312e1ebdf1da6fc8d37ffb/dashboard?q=dropdown)\r\n * Технический компонент для сборки выпадающих списков\r\n *\r\n * @param {Object} props - свойства компонента\r\n * @return {JSX} - компонент\r\n */\r\nexport class Dropdown extends React.Component {\r\n    static propTypes = {\r\n        children: PropTypes.node,\r\n        forceOpened: PropTypes.bool,\r\n        disabled: PropTypes.bool,\r\n        theme: PropTypes.object,\r\n        refWrapper: PropTypes.func,\r\n        onOpen: PropTypes.func,\r\n        onClose: PropTypes.func,\r\n        mode: PropTypes.oneOf(['click', 'focus', 'none']),\r\n        onKeyDown: PropTypes.func,\r\n        value: PropTypes.string,\r\n        onChange: PropTypes.func,\r\n        error: PropTypes.string,\r\n\r\n        id: PropTypes.string,\r\n        name: PropTypes.string,\r\n    }\r\n\r\n    static childContextTypes = {\r\n        dropdown: PropTypes.shape({\r\n            getOpened: PropTypes.func,\r\n            handleClose: PropTypes.func,\r\n            getValue: PropTypes.func,\r\n            getValueItem: PropTypes.func,\r\n            onChange: PropTypes.func,\r\n            getSelectedItem: PropTypes.func,\r\n            registerOption: PropTypes.func,\r\n            unregisterOption: PropTypes.func\r\n        })\r\n    }\r\n\r\n    static defaultProps = {\r\n        children: void 0,\r\n        forceOpened: void 0,\r\n        disabled: false,\r\n        value: '',\r\n        theme: defaultTheme,\r\n        refWrapper: _.noop,\r\n        onOpen: _.noop,\r\n        onClose: _.noop,\r\n        mode: 'click',\r\n        onKeyDown: _.noop,\r\n        onChange: _.noop,\r\n        error: void 0,\r\n\r\n        id: void 0,\r\n        name: void 0,\r\n    }\r\n\r\n    state = {\r\n        isOpened: false,\r\n        selected: null\r\n    }\r\n\r\n    getChildContext = () => ({\r\n        dropdown: {\r\n            getOpened: this.getOpened,\r\n            handleOpen: this.handleOpen,\r\n            handleClose: this.handleClose,\r\n            getValueItem: this.getValueItem,\r\n            getValue: this.getValue,\r\n            getSelectedItem: this.getSelectedItem,\r\n            getSelectedValue: this.getSelectedValue,\r\n            onChange: this.props.onChange,\r\n            registerOption: this.registerOption,\r\n            unregisterOption: this.unregisterOption\r\n        }\r\n    })\r\n\r\n    componentWillUnmount () {\r\n        document.removeEventListener('mouseup', this.handleMouseUp)\r\n    }\r\n\r\n    setRefPerimeterElement = (c) => {\r\n        this.props.refWrapper(c)\r\n        this.perimeterElement = c\r\n    }\r\n\r\n    setRefPerimeter = (c) => {\r\n        this.perimeter = c\r\n    }\r\n\r\n    getSelectedItem = () => this.state.selectedItem\r\n\r\n    getValueItem = () => _.find(this.options, (option) => option.props.value === this.getValue())\r\n\r\n    getValueItemByState = () => _.find(this.options, (option) => option.props.value === _.get(this.state.selectedItem, 'props.value'))\r\n\r\n    getSelectedValue = () => _.get(this.getSelectedItem(), 'props.value')\r\n\r\n    getValue = () => this.props.value\r\n\r\n    getOpened = () => this.props.mode === 'none' ? this.props.forceOpened : this.state.isOpened\r\n\r\n    getOption = () => this.getValueItemByState() || this.getValueItem() || _.first(this.options)\r\n\r\n    getEventHandlers = (childProps) => {\r\n        const { mode, disabled } = this.props\r\n\r\n        if (mode === 'click') {\r\n            return {\r\n                onClick: _.flow(_.compact([\r\n                    disableHandler(preventHandler(this.handleToggle), disabled),\r\n                    _.get(childProps, 'onClick')\r\n                ])),\r\n                onBlur: _.flow(_.compact([\r\n                    disableHandler(this.handleBlur, disabled),\r\n                    _.get(childProps, 'onBlur')\r\n                ]))\r\n            }\r\n        } else if (mode === 'focus') {\r\n            return {\r\n                onFocus: _.flow(_.compact([\r\n                    disableHandler(this.handleOpen, disabled),\r\n                    _.get(childProps, 'onFocus')\r\n                ])),\r\n                onBlur: _.flow(_.compact([\r\n                    disableHandler(this.handleBlur, disabled),\r\n                    _.get(childProps, 'onBlur')\r\n                ]))\r\n            }\r\n        }\r\n\r\n        return {}\r\n    }\r\n\r\n    handleKeyDown = (event) => {\r\n        if (this.getOpened() && !_.isEmpty(this.options)) {\r\n            switch (event.keyCode) {\r\n                case KEY_ARROW_DOWN: {\r\n                    event.preventDefault()\r\n                    this.updateSelected(cyclicNextItem(this.options, this.state.selectedItem))\r\n                    break\r\n                }\r\n                case KEY_ARROW_UP: {\r\n                    event.preventDefault()\r\n                    this.updateSelected(cyclicPrevItem(this.options, this.state.selectedItem))\r\n                    break\r\n                }\r\n                case KEY_HOME: {\r\n                    event.preventDefault()\r\n                    this.updateSelected(_.first(this.options))\r\n                    break\r\n                }\r\n                case KEY_END: {\r\n                    event.preventDefault()\r\n                    this.updateSelected(_.last(this.options))\r\n                    break\r\n                }\r\n                case KEY_ENTER: {\r\n                    event.preventDefault()\r\n                    this.state.selectedItem.handleClick(event)\r\n                    break\r\n                }\r\n\r\n                default: {\r\n                    break\r\n                }\r\n            }\r\n        }\r\n\r\n        this.props.onKeyDown(event)\r\n    }\r\n\r\n    handleOpen = () => {\r\n        const prevOpened = this.state.isOpened\r\n        this.setState({\r\n            isOpened: true,\r\n            selectedItem: this.getOption()\r\n        }, () => this.onHandling(prevOpened, true))\r\n    }\r\n\r\n    handleToggle = () => {\r\n        const prevOpened = this.state.isOpened\r\n        this.setState({\r\n            isOpened: !prevOpened,\r\n            selectedItem: !prevOpened ? this.getOption() : null\r\n        }, () => this.onHandling(prevOpened, !prevOpened))\r\n    }\r\n\r\n    handleClose = () => {\r\n        const prevOpened = this.state.isOpened\r\n        this.setState({\r\n            isOpened: false,\r\n            selectedItem: null\r\n        }, () => this.onHandling(prevOpened, false))\r\n    }\r\n\r\n    handleBlur = (event) => {\r\n        if (this.isMouseDown) {\r\n            return\r\n        }\r\n        this.handleClose(event)\r\n    }\r\n\r\n    handleMouseDown = () => {\r\n        this.isMouseDown = true\r\n\r\n        document.addEventListener('mouseup', this.handleMouseUp)\r\n    }\r\n\r\n    handleMouseUp = () => {\r\n        this.isMouseDown = false\r\n\r\n        document.removeEventListener('mouseup', this.handleMouseUp)\r\n    }\r\n\r\n    updateSelected = (selectedItem) => {\r\n        this.setState({ selectedItem })\r\n    }\r\n\r\n    onHandling = (prevState, nextState) => {\r\n        if (!prevState && nextState) {\r\n            if (this.props.mode !== 'none') {\r\n                this.perimeter.enableOnClickOutside()\r\n            }\r\n            this.props.onOpen()\r\n        } else if (prevState && !nextState) {\r\n            if (this.props.mode !== 'none') {\r\n                this.perimeter.disableOnClickOutside()\r\n            }\r\n            this.props.onClose()\r\n        }\r\n    }\r\n\r\n    registerOption = (option) => {\r\n        this.options.push(option)\r\n    }\r\n\r\n    unregisterOption = (optionValue) => {\r\n        this.options.splice(_.indexOf(_.map(this.options, (option) => option.props.value), optionValue), 1)\r\n    }\r\n\r\n    options = []\r\n\r\n    render () {\r\n        const { disabled, children, theme, mode, error } = this.props\r\n\r\n        const passedProps = _(this.props)\r\n            .omit([\r\n                'forceOpened',\r\n                'theme',\r\n                'onOpen',\r\n                'onClose',\r\n                'disabled',\r\n                'mode',\r\n                'onChange',\r\n                'onBlur',\r\n                'value',\r\n                'refWrapper',\r\n                'onClickOutside',\r\n                'translations',\r\n                'error',\r\n                'formName',\r\n                'active',\r\n                'asyncValidating',\r\n                'autofilled',\r\n                'dirty',\r\n                'dispatch',\r\n                'hasServerError',\r\n                'initialValue',\r\n                'invalid',\r\n                'pristine',\r\n                'submitFailed',\r\n                'submitting',\r\n                'touched',\r\n                'valid',\r\n                'visited',\r\n                'warning'\r\n            ])\r\n            .extend({\r\n                'data-unit': 'dropdown',\r\n                role: mode === 'focus' ? 'combobox' : 'listbox',\r\n                'aria-disabled': disabled,\r\n                'aria-expanded': this.getOpened(),\r\n                onKeyDown: this.handleKeyDown,\r\n                ref: this.setRefPerimeterElement,\r\n                className: classnames(theme.dropdown, Boolean(error) && theme.error)\r\n            })\r\n            .value()\r\n\r\n        return (\r\n            <div className={defaultTheme.dropdownWrapper}>\r\n                <Perimeter disableOnClickOutside ref={this.setRefPerimeter} onClickOutside={this.handleClose}>\r\n                    <span {...passedProps}>\r\n                        {React.Children.map(children, this.renderChild)}\r\n                    </span>\r\n                </Perimeter>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderChild = (child) => React.cloneElement(child, _.extend({\r\n        forceOpened: this.getOpened()\r\n    }, _.get(child, 'type.displayName') === Contents.displayName ? {\r\n        nodeTarget: this.perimeterElement,\r\n        // close only by clicking on outside, option, target|blur\r\n        // onClick: this.handleClose,\r\n        mode: this.props.mode,\r\n        nodeSelectedOption: _.get(this.getSelectedItem(), 'option'),\r\n        onMouseDown: this.handleMouseDown,\r\n        onMouseUp: this.handleMouseUp,\r\n        id: this.props.id,\r\n        name: this.props.name\r\n    } : this.getEventHandlers(child.props)))\r\n}\r\n\r\nDropdown.displayName = 'Dropdown'\r\nDropdown.TargetButton = TargetButton\r\nDropdown.Contents = Contents\r\nDropdown.Group = Group\r\nDropdown.Option = Option\r\nDropdown.Link = Link\r\nDropdown.theme = defaultTheme\r\nDropdown.utils = {\r\n    autoLeftCheckByParent,\r\n    autoLeftCheckByWindow,\r\n    autoTopCheckByWindow\r\n}\r\n\r\nDropdown.displayName = 'Dropdown'\r\nexport default Dropdown\r\n"],"names":["KEY_ENTER","KEY_ARROW_UP","KEY_ARROW_DOWN","KEY_END","KEY_HOME","Dropdown","isOpened","selected","dropdown","getOpened","handleOpen","handleClose","getValueItem","getValue","getSelectedItem","getSelectedValue","onChange","props","registerOption","unregisterOption","c","refWrapper","perimeterElement","perimeter","state","selectedItem","_","find","options","option","value","get","mode","forceOpened","getValueItemByState","first","childProps","disabled","onClick","flow","compact","disableHandler","preventHandler","handleToggle","onBlur","handleBlur","onFocus","event","isEmpty","keyCode","preventDefault","updateSelected","cyclicNextItem","cyclicPrevItem","last","handleClick","onKeyDown","prevOpened","setState","getOption","onHandling","isMouseDown","document","addEventListener","handleMouseUp","removeEventListener","prevState","nextState","enableOnClickOutside","onOpen","disableOnClickOutside","onClose","push","optionValue","splice","indexOf","map","child","React","cloneElement","extend","Contents","displayName","nodeTarget","nodeSelectedOption","onMouseDown","handleMouseDown","onMouseUp","id","name","getEventHandlers","children","theme","error","passedProps","omit","role","handleKeyDown","ref","setRefPerimeterElement","className","classnames","Boolean","defaultTheme","dropdownWrapper","setRefPerimeter","Children","renderChild","Component","PropTypes","node","bool","object","func","oneOf","string","shape","noop","TargetButton","Group","Option","Link","utils","autoLeftCheckByParent","autoLeftCheckByWindow","autoTopCheckByWindow"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBA,IAAMA,SAAS,GAAG,EAAlB;AACA,IAAMC,YAAY,GAAG,EAArB;AACA,IAAMC,cAAc,GAAG,EAAvB;AACA,IAAMC,OAAO,GAAG,EAAhB;AACA,IAAMC,QAAQ,GAAG,EAAjB;AAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IACaC,QAAb;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA,4DAkDY;AACJC,MAAAA,QAAQ,EAAE,KADN;AAEJC,MAAAA,QAAQ,EAAE;AAFN,KAlDZ;;AAAA,sEAuDsB;AAAA,aAAO;AACrBC,QAAAA,QAAQ,EAAE;AACNC,UAAAA,SAAS,EAAE,MAAKA,SADV;AAENC,UAAAA,UAAU,EAAE,MAAKA,UAFX;AAGNC,UAAAA,WAAW,EAAE,MAAKA,WAHZ;AAINC,UAAAA,YAAY,EAAE,MAAKA,YAJb;AAKNC,UAAAA,QAAQ,EAAE,MAAKA,QALT;AAMNC,UAAAA,eAAe,EAAE,MAAKA,eANhB;AAONC,UAAAA,gBAAgB,EAAE,MAAKA,gBAPjB;AAQNC,UAAAA,QAAQ,EAAE,MAAKC,KAAL,CAAWD,QARf;AASNE,UAAAA,cAAc,EAAE,MAAKA,cATf;AAUNC,UAAAA,gBAAgB,EAAE,MAAKA;AAVjB;AADW,OAAP;AAAA,KAvDtB;;AAAA,6EA0E6B,UAACC,CAAD,EAAO;AAC5B,YAAKH,KAAL,CAAWI,UAAX,CAAsBD,CAAtB;;AACA,YAAKE,gBAAL,GAAwBF,CAAxB;AACH,KA7EL;;AAAA,sEA+EsB,UAACA,CAAD,EAAO;AACrB,YAAKG,SAAL,GAAiBH,CAAjB;AACH,KAjFL;;AAAA,sEAmFsB;AAAA,aAAM,MAAKI,KAAL,CAAWC,YAAjB;AAAA,KAnFtB;;AAAA,mEAqFmB;AAAA,aAAMC,CAAC,CAACC,IAAF,CAAO,MAAKC,OAAZ,EAAqB,UAACC,MAAD;AAAA,eAAYA,MAAM,CAACZ,KAAP,CAAaa,KAAb,KAAuB,MAAKjB,QAAL,EAAnC;AAAA,OAArB,CAAN;AAAA,KArFnB;;AAAA,0EAuF0B;AAAA,aAAMa,CAAC,CAACC,IAAF,CAAO,MAAKC,OAAZ,EAAqB,UAACC,MAAD;AAAA,eAAYA,MAAM,CAACZ,KAAP,CAAaa,KAAb,KAAuBJ,CAAC,CAACK,GAAF,CAAM,MAAKP,KAAL,CAAWC,YAAjB,EAA+B,aAA/B,CAAnC;AAAA,OAArB,CAAN;AAAA,KAvF1B;;AAAA,uEAyFuB;AAAA,aAAMC,CAAC,CAACK,GAAF,CAAM,MAAKjB,eAAL,EAAN,EAA8B,aAA9B,CAAN;AAAA,KAzFvB;;AAAA,+DA2Fe;AAAA,aAAM,MAAKG,KAAL,CAAWa,KAAjB;AAAA,KA3Ff;;AAAA,gEA6FgB;AAAA,aAAM,MAAKb,KAAL,CAAWe,IAAX,KAAoB,MAApB,GAA6B,MAAKf,KAAL,CAAWgB,WAAxC,GAAsD,MAAKT,KAAL,CAAWlB,QAAvE;AAAA,KA7FhB;;AAAA,gEA+FgB;AAAA,aAAM,MAAK4B,mBAAL,MAA8B,MAAKtB,YAAL,EAA9B,IAAqDc,CAAC,CAACS,KAAF,CAAQ,MAAKP,OAAb,CAA3D;AAAA,KA/FhB;;AAAA,uEAiGuB,UAACQ,UAAD,EAAgB;AAAA,wBACJ,MAAKnB,KADD;AAAA,UACvBe,IADuB,eACvBA,IADuB;AAAA,UACjBK,QADiB,eACjBA,QADiB;;AAG/B,UAAIL,IAAI,KAAK,OAAb,EAAsB;AAClB,eAAO;AACHM,UAAAA,OAAO,EAAEZ,CAAC,CAACa,IAAF,CAAOb,CAAC,CAACc,OAAF,CAAU,CACtBC,cAAc,CAACC,cAAc,CAAC,MAAKC,YAAN,CAAf,EAAoCN,QAApC,CADQ,EAEtBX,CAAC,CAACK,GAAF,CAAMK,UAAN,EAAkB,SAAlB,CAFsB,CAAV,CAAP,CADN;AAKHQ,UAAAA,MAAM,EAAElB,CAAC,CAACa,IAAF,CAAOb,CAAC,CAACc,OAAF,CAAU,CACrBC,cAAc,CAAC,MAAKI,UAAN,EAAkBR,QAAlB,CADO,EAErBX,CAAC,CAACK,GAAF,CAAMK,UAAN,EAAkB,QAAlB,CAFqB,CAAV,CAAP;AALL,SAAP;AAUH,OAXD,MAWO,IAAIJ,IAAI,KAAK,OAAb,EAAsB;AACzB,eAAO;AACHc,UAAAA,OAAO,EAAEpB,CAAC,CAACa,IAAF,CAAOb,CAAC,CAACc,OAAF,CAAU,CACtBC,cAAc,CAAC,MAAK/B,UAAN,EAAkB2B,QAAlB,CADQ,EAEtBX,CAAC,CAACK,GAAF,CAAMK,UAAN,EAAkB,SAAlB,CAFsB,CAAV,CAAP,CADN;AAKHQ,UAAAA,MAAM,EAAElB,CAAC,CAACa,IAAF,CAAOb,CAAC,CAACc,OAAF,CAAU,CACrBC,cAAc,CAAC,MAAKI,UAAN,EAAkBR,QAAlB,CADO,EAErBX,CAAC,CAACK,GAAF,CAAMK,UAAN,EAAkB,QAAlB,CAFqB,CAAV,CAAP;AALL,SAAP;AAUH;;AAED,aAAO,EAAP;AACH,KA7HL;;AAAA,oEA+HoB,UAACW,KAAD,EAAW;AACvB,UAAI,MAAKtC,SAAL,MAAoB,CAACiB,CAAC,CAACsB,OAAF,CAAU,MAAKpB,OAAf,CAAzB,EAAkD;AAC9C,gBAAQmB,KAAK,CAACE,OAAd;AACI,eAAK/C,cAAL;AAAqB;AACjB6C,cAAAA,KAAK,CAACG,cAAN;;AACA,oBAAKC,cAAL,CAAoBC,cAAc,CAAC,MAAKxB,OAAN,EAAe,MAAKJ,KAAL,CAAWC,YAA1B,CAAlC;;AACA;AACH;;AACD,eAAKxB,YAAL;AAAmB;AACf8C,cAAAA,KAAK,CAACG,cAAN;;AACA,oBAAKC,cAAL,CAAoBE,cAAc,CAAC,MAAKzB,OAAN,EAAe,MAAKJ,KAAL,CAAWC,YAA1B,CAAlC;;AACA;AACH;;AACD,eAAKrB,QAAL;AAAe;AACX2C,cAAAA,KAAK,CAACG,cAAN;;AACA,oBAAKC,cAAL,CAAoBzB,CAAC,CAACS,KAAF,CAAQ,MAAKP,OAAb,CAApB;;AACA;AACH;;AACD,eAAKzB,OAAL;AAAc;AACV4C,cAAAA,KAAK,CAACG,cAAN;;AACA,oBAAKC,cAAL,CAAoBzB,CAAC,CAAC4B,IAAF,CAAO,MAAK1B,OAAZ,CAApB;;AACA;AACH;;AACD,eAAK5B,SAAL;AAAgB;AACZ+C,cAAAA,KAAK,CAACG,cAAN;;AACA,oBAAK1B,KAAL,CAAWC,YAAX,CAAwB8B,WAAxB,CAAoCR,KAApC;;AACA;AACH;AAzBL;AA+BH;;AAED,YAAK9B,KAAL,CAAWuC,SAAX,CAAqBT,KAArB;AACH,KAnKL;;AAAA,iEAqKiB,YAAM;AACf,UAAMU,UAAU,GAAG,MAAKjC,KAAL,CAAWlB,QAA9B;;AACA,YAAKoD,QAAL,CAAc;AACVpD,QAAAA,QAAQ,EAAE,IADA;AAEVmB,QAAAA,YAAY,EAAE,MAAKkC,SAAL;AAFJ,OAAd,EAGG;AAAA,eAAM,MAAKC,UAAL,CAAgBH,UAAhB,EAA4B,IAA5B,CAAN;AAAA,OAHH;AAIH,KA3KL;;AAAA,mEA6KmB,YAAM;AACjB,UAAMA,UAAU,GAAG,MAAKjC,KAAL,CAAWlB,QAA9B;;AACA,YAAKoD,QAAL,CAAc;AACVpD,QAAAA,QAAQ,EAAE,CAACmD,UADD;AAEVhC,QAAAA,YAAY,EAAE,CAACgC,UAAD,GAAc,MAAKE,SAAL,EAAd,GAAiC;AAFrC,OAAd,EAGG;AAAA,eAAM,MAAKC,UAAL,CAAgBH,UAAhB,EAA4B,CAACA,UAA7B,CAAN;AAAA,OAHH;AAIH,KAnLL;;AAAA,kEAqLkB,YAAM;AAChB,UAAMA,UAAU,GAAG,MAAKjC,KAAL,CAAWlB,QAA9B;;AACA,YAAKoD,QAAL,CAAc;AACVpD,QAAAA,QAAQ,EAAE,KADA;AAEVmB,QAAAA,YAAY,EAAE;AAFJ,OAAd,EAGG;AAAA,eAAM,MAAKmC,UAAL,CAAgBH,UAAhB,EAA4B,KAA5B,CAAN;AAAA,OAHH;AAIH,KA3LL;;AAAA,iEA6LiB,UAACV,KAAD,EAAW;AACpB,UAAI,MAAKc,WAAT,EAAsB;AAClB;AACH;;AACD,YAAKlD,WAAL,CAAiBoC,KAAjB;AACH,KAlML;;AAAA,sEAoMsB,YAAM;AACpB,YAAKc,WAAL,GAAmB,IAAnB;AAEAC,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqC,MAAKC,aAA1C;AACH,KAxML;;AAAA,oEA0MoB,YAAM;AAClB,YAAKH,WAAL,GAAmB,KAAnB;AAEAC,MAAAA,QAAQ,CAACG,mBAAT,CAA6B,SAA7B,EAAwC,MAAKD,aAA7C;AACH,KA9ML;;AAAA,qEAgNqB,UAACvC,YAAD,EAAkB;AAC/B,YAAKiC,QAAL,CAAc;AAAEjC,QAAAA,YAAY,EAAZA;AAAF,OAAd;AACH,KAlNL;;AAAA,iEAoNiB,UAACyC,SAAD,EAAYC,SAAZ,EAA0B;AACnC,UAAI,CAACD,SAAD,IAAcC,SAAlB,EAA6B;AACzB,YAAI,MAAKlD,KAAL,CAAWe,IAAX,KAAoB,MAAxB,EAAgC;AAC5B,gBAAKT,SAAL,CAAe6C,oBAAf;AACH;;AACD,cAAKnD,KAAL,CAAWoD,MAAX;AACH,OALD,MAKO,IAAIH,SAAS,IAAI,CAACC,SAAlB,EAA6B;AAChC,YAAI,MAAKlD,KAAL,CAAWe,IAAX,KAAoB,MAAxB,EAAgC;AAC5B,gBAAKT,SAAL,CAAe+C,qBAAf;AACH;;AACD,cAAKrD,KAAL,CAAWsD,OAAX;AACH;AACJ,KAhOL;;AAAA,qEAkOqB,UAAC1C,MAAD,EAAY;AACzB,YAAKD,OAAL,CAAa4C,IAAb,CAAkB3C,MAAlB;AACH,KApOL;;AAAA,uEAsOuB,UAAC4C,WAAD,EAAiB;AAChC,YAAK7C,OAAL,CAAa8C,MAAb,CAAoBhD,CAAC,CAACiD,OAAF,CAAUjD,CAAC,CAACkD,GAAF,CAAM,MAAKhD,OAAX,EAAoB,UAACC,MAAD;AAAA,eAAYA,MAAM,CAACZ,KAAP,CAAaa,KAAzB;AAAA,OAApB,CAAV,EAA+D2C,WAA/D,CAApB,EAAiG,CAAjG;AACH,KAxOL;;AAAA,8DA0Oc,EA1Od;;AAAA,kEAqSkB,UAACI,KAAD;AAAA,0BAAWC,KAAK,CAACC,YAAN,CAAmBF,KAAnB,EAA0BnD,CAAC,CAACsD,MAAF,CAAS;AACxD/C,QAAAA,WAAW,EAAE,MAAKxB,SAAL;AAD2C,OAAT,EAEhDiB,CAAC,CAACK,GAAF,CAAM8C,KAAN,EAAa,kBAAb,MAAqCI,QAAQ,CAACC,WAA9C,GAA4D;AAC3DC,QAAAA,UAAU,EAAE,MAAK7D,gBAD0C;AAE3D;AACA;AACAU,QAAAA,IAAI,EAAE,MAAKf,KAAL,CAAWe,IAJ0C;AAK3DoD,QAAAA,kBAAkB,EAAE1D,CAAC,CAACK,GAAF,CAAM,MAAKjB,eAAL,EAAN,EAA8B,QAA9B,CALuC;AAM3DuE,QAAAA,WAAW,EAAE,MAAKC,eANyC;AAO3DC,QAAAA,SAAS,EAAE,MAAKvB,aAP2C;AAQ3DwB,QAAAA,EAAE,EAAE,MAAKvE,KAAL,CAAWuE,EAR4C;AAS3DC,QAAAA,IAAI,EAAE,MAAKxE,KAAL,CAAWwE;AAT0C,OAA5D,GAUC,MAAKC,gBAAL,CAAsBb,KAAK,CAAC5D,KAA5B,CAZ+C,CAA1B,CAAX;AAAA,KArSlB;;AAAA;AAAA;;AAAA;AAAA;AAAA,2CAsE4B;AACpB6C,MAAAA,QAAQ,CAACG,mBAAT,CAA6B,SAA7B,EAAwC,KAAKD,aAA7C;AACH;AAxEL;AAAA;AAAA,6BA4Oc;AAAA,yBAC6C,KAAK/C,KADlD;AAAA,UACEoB,QADF,gBACEA,QADF;AAAA,UACYsD,QADZ,gBACYA,QADZ;AAAA,UACsBC,KADtB,gBACsBA,KADtB;AAAA,UAC6B5D,IAD7B,gBAC6BA,IAD7B;AAAA,UACmC6D,KADnC,gBACmCA,KADnC;;AAGN,UAAMC,WAAW,GAAGpE,CAAC,CAAC,KAAKT,KAAN,CAAD,CACf8E,IADe,CACV,CACF,aADE,EAEF,OAFE,EAGF,QAHE,EAIF,SAJE,EAKF,UALE,EAMF,MANE,EAOF,UAPE,EAQF,QARE,EASF,OATE,EAUF,YAVE,EAWF,gBAXE,EAYF,cAZE,EAaF,OAbE,EAcF,UAdE,EAeF,QAfE,EAgBF,iBAhBE,EAiBF,YAjBE,EAkBF,OAlBE,EAmBF,UAnBE,EAoBF,gBApBE,EAqBF,cArBE,EAsBF,SAtBE,EAuBF,UAvBE,EAwBF,cAxBE,EAyBF,YAzBE,EA0BF,SA1BE,EA2BF,OA3BE,EA4BF,SA5BE,EA6BF,SA7BE,CADU,EAgCff,MAhCe,CAgCR;AACJ,qBAAa,UADT;AAEJgB,QAAAA,IAAI,EAAEhE,IAAI,KAAK,OAAT,GAAmB,UAAnB,GAAgC,SAFlC;AAGJ,yBAAiBK,QAHb;AAIJ,yBAAiB,KAAK5B,SAAL,EAJb;AAKJ+C,QAAAA,SAAS,EAAE,KAAKyC,aALZ;AAMJC,QAAAA,GAAG,EAAE,KAAKC,sBANN;AAOJC,QAAAA,SAAS,EAAEC,UAAU,CAACT,KAAK,CAACpF,QAAP,EAAiB8F,OAAO,CAACT,KAAD,CAAP,IAAkBD,KAAK,CAACC,KAAzC;AAPjB,OAhCQ,EAyCf/D,KAzCe,EAApB;;AA2CA,0BACI;AAAK,QAAA,SAAS,EAAEyE,YAAY,CAACC;AAA7B,sBACI,oBAAC,SAAD;AAAW,QAAA,qBAAqB,MAAhC;AAAiC,QAAA,GAAG,EAAE,KAAKC,eAA3C;AAA4D,QAAA,cAAc,EAAE,KAAK9F;AAAjF,sBACI,4BAAUmF,WAAV,EACKhB,KAAK,CAAC4B,QAAN,CAAe9B,GAAf,CAAmBe,QAAnB,EAA6B,KAAKgB,WAAlC,CADL,CADJ,CADJ,CADJ;AASH;AAnSL;;AAAA;AAAA,EAA8B7B,KAAK,CAAC8B,SAApC;;gBAAavG,uBACU;AACfsF,EAAAA,QAAQ,EAAEkB,SAAS,CAACC,IADL;AAEf7E,EAAAA,WAAW,EAAE4E,SAAS,CAACE,IAFR;AAGf1E,EAAAA,QAAQ,EAAEwE,SAAS,CAACE,IAHL;AAIfnB,EAAAA,KAAK,EAAEiB,SAAS,CAACG,MAJF;AAKf3F,EAAAA,UAAU,EAAEwF,SAAS,CAACI,IALP;AAMf5C,EAAAA,MAAM,EAAEwC,SAAS,CAACI,IANH;AAOf1C,EAAAA,OAAO,EAAEsC,SAAS,CAACI,IAPJ;AAQfjF,EAAAA,IAAI,EAAE6E,SAAS,CAACK,KAAV,CAAgB,CAAC,OAAD,EAAU,OAAV,EAAmB,MAAnB,CAAhB,CARS;AASf1D,EAAAA,SAAS,EAAEqD,SAAS,CAACI,IATN;AAUfnF,EAAAA,KAAK,EAAE+E,SAAS,CAACM,MAVF;AAWfnG,EAAAA,QAAQ,EAAE6F,SAAS,CAACI,IAXL;AAYfpB,EAAAA,KAAK,EAAEgB,SAAS,CAACM,MAZF;AAcf3B,EAAAA,EAAE,EAAEqB,SAAS,CAACM,MAdC;AAef1B,EAAAA,IAAI,EAAEoB,SAAS,CAACM;AAfD;;gBADV9G,+BAmBkB;AACvBG,EAAAA,QAAQ,EAAEqG,SAAS,CAACO,KAAV,CAAgB;AACtB3G,IAAAA,SAAS,EAAEoG,SAAS,CAACI,IADC;AAEtBtG,IAAAA,WAAW,EAAEkG,SAAS,CAACI,IAFD;AAGtBpG,IAAAA,QAAQ,EAAEgG,SAAS,CAACI,IAHE;AAItBrG,IAAAA,YAAY,EAAEiG,SAAS,CAACI,IAJF;AAKtBjG,IAAAA,QAAQ,EAAE6F,SAAS,CAACI,IALE;AAMtBnG,IAAAA,eAAe,EAAE+F,SAAS,CAACI,IANL;AAOtB/F,IAAAA,cAAc,EAAE2F,SAAS,CAACI,IAPJ;AAQtB9F,IAAAA,gBAAgB,EAAE0F,SAAS,CAACI;AARN,GAAhB;AADa;;gBAnBlB5G,0BAgCa;AAClBsF,EAAAA,QAAQ,EAAE,KAAK,CADG;AAElB1D,EAAAA,WAAW,EAAE,KAAK,CAFA;AAGlBI,EAAAA,QAAQ,EAAE,KAHQ;AAIlBP,EAAAA,KAAK,EAAE,EAJW;AAKlB8D,EAAAA,KAAK,EAAEW,YALW;AAMlBlF,EAAAA,UAAU,EAAEK,CAAC,CAAC2F,IANI;AAOlBhD,EAAAA,MAAM,EAAE3C,CAAC,CAAC2F,IAPQ;AAQlB9C,EAAAA,OAAO,EAAE7C,CAAC,CAAC2F,IARO;AASlBrF,EAAAA,IAAI,EAAE,OATY;AAUlBwB,EAAAA,SAAS,EAAE9B,CAAC,CAAC2F,IAVK;AAWlBrG,EAAAA,QAAQ,EAAEU,CAAC,CAAC2F,IAXM;AAYlBxB,EAAAA,KAAK,EAAE,KAAK,CAZM;AAclBL,EAAAA,EAAE,EAAE,KAAK,CAdS;AAelBC,EAAAA,IAAI,EAAE,KAAK;AAfO;;AAoR1BpF,QAAQ,CAAC6E,WAAT,GAAuB,UAAvB;AACA7E,QAAQ,CAACiH,YAAT,GAAwBA,YAAxB;AACAjH,QAAQ,CAAC4E,QAAT,GAAoBA,QAApB;AACA5E,QAAQ,CAACkH,KAAT,GAAiBA,KAAjB;AACAlH,QAAQ,CAACmH,MAAT,GAAkBA,MAAlB;AACAnH,QAAQ,CAACoH,IAAT,GAAgBA,IAAhB;AACApH,QAAQ,CAACuF,KAAT,GAAiBW,YAAjB;AACAlG,QAAQ,CAACqH,KAAT,GAAiB;AACbC,EAAAA,qBAAqB,EAArBA,qBADa;AAEbC,EAAAA,qBAAqB,EAArBA,qBAFa;AAGbC,EAAAA,oBAAoB,EAApBA;AAHa,CAAjB;AAMAxH,QAAQ,CAAC6E,WAAT,GAAuB,UAAvB;;;;;"}