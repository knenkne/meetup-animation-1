{"version":3,"file":"option.js","sources":["../../src/dropdown/option.jsx"],"sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classnames from 'classnames'\r\nimport _ from 'lodash'\r\n\r\nimport defaultTheme from './style.css'\r\nimport styles from './select/select.css'\r\n\r\n/* eslint-disable valid-jsdoc, comment: некорректный парсинг jsdoc */\r\n/**\r\n * [Zeplin](https://app.zeplin.io/project/59312e1ebdf1da6fc8d37ffb/dashboard?q=dropdown)\r\n * Стандартизированная верская опции + коннект с Dropdown\r\n *\r\n * @param {Object} props - свойства компонента\r\n * @return {JSX} - компонент\r\n */\r\nexport class Option extends React.Component {\r\n    static displayName = 'Dropdown.Option'\r\n\r\n    static propTypes = {\r\n        theme: PropTypes.object,\r\n        children: PropTypes.node,\r\n        title: PropTypes.string.isRequired,\r\n        description: PropTypes.string,\r\n        onClick: PropTypes.func,\r\n        value: PropTypes.string.isRequired,\r\n        translations: PropTypes.shape({\r\n            /**\r\n             * Стандартный атрибут title. Необходим для выбора валюты. Также применим, если опция шире контента.\r\n             */\r\n            title: PropTypes.string\r\n        }),\r\n        altSymbol: PropTypes.string,\r\n        additional: PropTypes.string\r\n    }\r\n\r\n    static contextTypes = {\r\n        dropdown: PropTypes.object\r\n    }\r\n\r\n    static defaultProps = {\r\n        theme: defaultTheme,\r\n        onClick: _.noop,\r\n        children: void 0,\r\n        description: void 0,\r\n        translations: {},\r\n        altSymbol: void 0,\r\n        additional: void 0\r\n    }\r\n\r\n    componentDidMount () {\r\n        this.context.dropdown.registerOption(this)\r\n    }\r\n\r\n    componentWillUnmount () {\r\n        this.context.dropdown.unregisterOption(this.props.value)\r\n    }\r\n\r\n    getPassedProps = () => {\r\n        const { theme, value, translations } = this.props\r\n        const { getValue, getSelectedValue, getOpened } = this.context.dropdown\r\n\r\n        return _(this.props)\r\n            .omit([\r\n                'theme',\r\n                'children',\r\n                'title',\r\n                'translations',\r\n                'description',\r\n                'selected',\r\n                'altSymbol'\r\n            ])\r\n            .extend({\r\n                disabled: !getOpened(),\r\n                'data-unit': 'dropdown:option',\r\n                className: classnames(theme.item, {\r\n                    [theme.checked]: value === getValue(),\r\n                    [theme.selected]: value === getSelectedValue()\r\n                }),\r\n                onMouseDown: this.handleClick, /* Для возможности закрыть dropdown по выбору с мышки */\r\n                onClick: this.handleClick, /* Для обработки touch-событий */\r\n                role: 'option',\r\n                'aria-checked': value === getValue(),\r\n                'aria-selected': value === getSelectedValue(),\r\n                ref: this.setRefOption,\r\n                title: translations.title\r\n            })\r\n            .value()\r\n    }\r\n\r\n    setRefOption = (component) => {\r\n        this.option = component\r\n    }\r\n\r\n    handleClick = () => {\r\n        const { onChange, handleClose } = this.context.dropdown\r\n        const { value, onClick } = this.props\r\n\r\n        onChange(value)\r\n        onClick(value)\r\n        handleClose()\r\n    }\r\n\r\n    render () {\r\n        const { theme, children, title, description, additional } = this.props\r\n\r\n        return (\r\n            <div {...this.getPassedProps()}>\r\n                {children && <span className={theme.itemIcon}>{children}</span>}\r\n                <span className={theme.itemTitle} data-unit=\"dropdown:option:title\">{title}</span>\r\n                {description && <span className={theme.itemDescription}>{description}</span>\r\n                }\r\n                {additional && <span className={styles.itemAside}>{additional}</span> }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"],"names":["Option","props","theme","value","translations","context","dropdown","getValue","getSelectedValue","getOpened","_","omit","extend","disabled","className","classnames","item","checked","selected","onMouseDown","handleClick","onClick","role","ref","setRefOption","title","component","option","onChange","handleClose","registerOption","unregisterOption","children","description","additional","getPassedProps","itemIcon","itemTitle","itemDescription","styles","itemAside","React","Component","PropTypes","object","node","string","isRequired","func","shape","altSymbol","defaultTheme","noop"],"mappings":"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"}