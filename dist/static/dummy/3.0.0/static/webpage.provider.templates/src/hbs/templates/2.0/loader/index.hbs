<script>
	(function () {
		var Loader = function () {
			this.loadElement = document.createElement('span');
			this.loadElement.style.display = 'block';
			this.setClass();
			this.isLoading = true;

			var content_center = document.getElementsByClassName('content__center')[0];
			var spinnerElement = document.createElement('span');
			spinnerElement.className = "loader__spinner loader__spinner--big";

			this.loadElement.appendChild(spinnerElement);
			content_center.appendChild(this.loadElement);
		}

		Loader.prototype.setClass = function (cl) {
			this.loadElement.className = ["loader", "loader--fill"].concat([cl]).join(' ');
		}

		Loader.prototype.startLoader = function () {
			if (!this.isLoading) {
				this.animationend(this.setClass)
				this.isLoading = true
				this.loadElement.style.display = 'block';
				this.setClass('loader--fade-in');
			}
		}

		Loader.prototype.stopLoader = function () {
			if (this.isLoading) {
				this.animationend(function () {
					this.loadElement.style.display = 'none';
				})
				this.isLoading = false
				this.setClass('loader--fade-out')
			}
		}

		Loader.prototype.animationend = function (callback) {
			var _this = this

			if (this.__handler) {
				this.loadElement.removeEventListener('animationend', this.__handler);
			}

			this.__handler = function () {
				callback.call(_this);
				_this.loadElement.removeEventListener('animationend', this.__handler);
			}
			this.loadElement.addEventListener('animationend', this.__handler);
		}

		var _l = new Loader()
		window.startLoader = _l.startLoader.bind(_l)
		window.stopLoader = _l.stopLoader.bind(_l)
	})()
</script>
