{"version":3,"file":"tip.js","sources":["../../src/tooltip/tip.jsx"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport { parseDirection, makeDirection } from '../utils/make-direction'\nimport { Typography } from '../typography/typography'\nimport { IndentWrapper } from '../indent-wrapper/indent-wrapper.style'\n\nimport { TipStyled, ActiveZoneStyled, ContentsStyled } from './tooltip.style'\n\n/**\n * [Zeplin](https://app.zeplin.io/project/59312e1ebdf1da6fc8d37ffb/dashboard?q=Tooltip)\n * Компонент всплывающей подсказки\n *\n * @param {Object} props - свойства компонента\n * @return {JSX} - компонент\n */\nexport class Tip extends React.Component {\n    constructor (props) {\n        super(props)\n\n        this.state = {\n            direction: parseDirection(this.props.direction),\n            startDirection: parseDirection(this.props.direction)\n        }\n        this.tipRef = null\n    }\n\n    componentDidUpdate (previousProps) {\n        if (this.tipRef && this.props.forceOpened && this.props.forceOpened !== previousProps.forceOpened) {\n            // eslint-disable-next-line react/no-did-update-set-state, comment: меняем положение подсказки, если она выходит за границы окна\n            this.setState(({ direction, startDirection }) => ({\n                direction: makeDirection(this.tipRef, direction, startDirection)\n            }))\n        }\n    }\n\n    refCallback = (element) => {\n        this.tipRef = element\n    }\n\n    render () {\n        const { title, description, children, forceOpened } = this.props\n        const [verticalDirection, horizontalDirection] = this.state.direction\n\n        const passedProps = _(this.props)\n            .omit(['children', 'direction', 'forceOpened'])\n            .extend({\n                'aria-live': 'assertive',\n                role: 'tooltip'\n            })\n            .value()\n\n        return (\n            <TipStyled {...passedProps} vd={verticalDirection} hd={horizontalDirection} show={forceOpened} ref={this.refCallback}>\n                <ActiveZoneStyled>\n                    <ContentsStyled>\n                        <IndentWrapper size=\"md\" horizontal=\"innerspace\" vertical=\"innerspace\">\n                            {!children ?\n                                <>\n                                    <Typography size=\"md\" indent=\"zero\" mode=\"semibold\">{title}</Typography>\n                                    <Typography size=\"sm\" indent=\"nano\" colorScheme=\"gray70A\" last>{description}</Typography>\n                                </>\n                                :\n                                children\n                            }\n                        </IndentWrapper>\n                    </ContentsStyled>\n                </ActiveZoneStyled>\n            </TipStyled>\n        )\n    }\n}\n\nTip.propTypes = {\n    children: PropTypes.node,\n    /**\n     * Направление отображения подсказки относительно родителя\n     */\n    direction: PropTypes.oneOf([\n        'topLeft',\n        'topRight',\n        'topCenter',\n        'bottomLeft',\n        'bottomRight',\n        'bottomCenter'\n    ]),\n    mode: PropTypes.oneOf(['error', 'info']),\n    forceOpened: PropTypes.bool\n}\n\nTip.defaultProps = {\n    children: null,\n    mode: 'info',\n    direction: 'topLeft',\n    forceOpened: false\n}\n\nTip.displayName = 'Tooltip.Tip'\n"],"names":["Tip","props","element","tipRef","state","direction","parseDirection","startDirection","previousProps","forceOpened","setState","makeDirection","title","description","children","verticalDirection","horizontalDirection","passedProps","_","omit","extend","role","value","refCallback","Typography","React","Component","propTypes","PropTypes","node","oneOf","mode","bool","defaultProps","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;AAUA;;;;;;;;IAOaA,GAAb;AAAA;;AAAA;;AACI,eAAaC,KAAb,EAAoB;AAAA;;AAAA;;AAChB,8BAAMA,KAAN;;AADgB,kEAmBN,UAACC,OAAD,EAAa;AACvB,YAAKC,MAAL,GAAcD,OAAd;AACH,KArBmB;;AAGhB,UAAKE,KAAL,GAAa;AACTC,MAAAA,SAAS,EAAEC,cAAc,CAAC,MAAKL,KAAL,CAAWI,SAAZ,CADhB;AAETE,MAAAA,cAAc,EAAED,cAAc,CAAC,MAAKL,KAAL,CAAWI,SAAZ;AAFrB,KAAb;AAIA,UAAKF,MAAL,GAAc,IAAd;AAPgB;AAQnB;;AATL;AAAA;AAAA,uCAWwBK,aAXxB,EAWuC;AAAA;;AAC/B,UAAI,KAAKL,MAAL,IAAe,KAAKF,KAAL,CAAWQ,WAA1B,IAAyC,KAAKR,KAAL,CAAWQ,WAAX,KAA2BD,aAAa,CAACC,WAAtF,EAAmG;AAC/F;AACA,aAAKC,QAAL,CAAc;AAAA,cAAGL,SAAH,QAAGA,SAAH;AAAA,cAAcE,cAAd,QAAcA,cAAd;AAAA,iBAAoC;AAC9CF,YAAAA,SAAS,EAAEM,aAAa,CAAC,MAAI,CAACR,MAAN,EAAcE,SAAd,EAAyBE,cAAzB;AADsB,WAApC;AAAA,SAAd;AAGH;AACJ;AAlBL;AAAA;AAAA,6BAwBc;AAAA,wBACgD,KAAKN,KADrD;AAAA,UACEW,KADF,eACEA,KADF;AAAA,UACSC,WADT,eACSA,WADT;AAAA,UACsBC,QADtB,eACsBA,QADtB;AAAA,UACgCL,WADhC,eACgCA,WADhC;;AAAA,iDAE2C,KAAKL,KAAL,CAAWC,SAFtD;AAAA,UAECU,iBAFD;AAAA,UAEoBC,mBAFpB;;AAIN,UAAMC,WAAW,GAAGC,CAAC,CAAC,KAAKjB,KAAN,CAAD,CACfkB,IADe,CACV,CAAC,UAAD,EAAa,WAAb,EAA0B,aAA1B,CADU,EAEfC,MAFe,CAER;AACJ,qBAAa,WADT;AAEJC,QAAAA,IAAI,EAAE;AAFF,OAFQ,EAMfC,KANe,EAApB;;AAQA,0BACI,oBAAC,SAAD,eAAeL,WAAf;AAA4B,QAAA,EAAE,EAAEF,iBAAhC;AAAmD,QAAA,EAAE,EAAEC,mBAAvD;AAA4E,QAAA,IAAI,EAAEP,WAAlF;AAA+F,QAAA,GAAG,EAAE,KAAKc;AAAzG,uBACI,oBAAC,gBAAD,qBACI,oBAAC,cAAD,qBACI,oBAAC,aAAD;AAAe,QAAA,IAAI,EAAC,IAApB;AAAyB,QAAA,UAAU,EAAC,YAApC;AAAiD,QAAA,QAAQ,EAAC;AAA1D,SACK,CAACT,QAAD,gBACG,uDACI,oBAACU,gBAAD;AAAY,QAAA,IAAI,EAAC,IAAjB;AAAsB,QAAA,MAAM,EAAC,MAA7B;AAAoC,QAAA,IAAI,EAAC;AAAzC,SAAqDZ,KAArD,CADJ,eAEI,oBAACY,gBAAD;AAAY,QAAA,IAAI,EAAC,IAAjB;AAAsB,QAAA,MAAM,EAAC,MAA7B;AAAoC,QAAA,WAAW,EAAC,SAAhD;AAA0D,QAAA,IAAI;AAA9D,SAAgEX,WAAhE,CAFJ,CADH,GAMGC,QAPR,CADJ,CADJ,CADJ,CADJ;AAkBH;AAtDL;;AAAA;AAAA,EAAyBW,KAAK,CAACC,SAA/B;AAyDA1B,GAAG,CAAC2B,SAAJ,GAAgB;AACZb,EAAAA,QAAQ,EAAEc,SAAS,CAACC,IADR;;AAEZ;;;AAGAxB,EAAAA,SAAS,EAAEuB,SAAS,CAACE,KAAV,CAAgB,CACvB,SADuB,EAEvB,UAFuB,EAGvB,WAHuB,EAIvB,YAJuB,EAKvB,aALuB,EAMvB,cANuB,CAAhB,CALC;AAaZC,EAAAA,IAAI,EAAEH,SAAS,CAACE,KAAV,CAAgB,CAAC,OAAD,EAAU,MAAV,CAAhB,CAbM;AAcZrB,EAAAA,WAAW,EAAEmB,SAAS,CAACI;AAdX,CAAhB;AAiBAhC,GAAG,CAACiC,YAAJ,GAAmB;AACfnB,EAAAA,QAAQ,EAAE,IADK;AAEfiB,EAAAA,IAAI,EAAE,MAFS;AAGf1B,EAAAA,SAAS,EAAE,SAHI;AAIfI,EAAAA,WAAW,EAAE;AAJE,CAAnB;AAOAT,GAAG,CAACkC,WAAJ,GAAkB,aAAlB;;;;"}