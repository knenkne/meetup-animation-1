{"version":3,"file":"horizontal-scroll.js","sources":["../../src/horizontal-scroll/horizontal-scroll.jsx"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\n\nimport { Icon } from '../icon'\nimport { ic24ArrowLeft } from '../icon/common'\nimport { isMobilePlatform } from '../utils/adaptive'\nimport { InnerStyled, OuterStyled } from '../full-width/full-width.style'\n\nimport { leftCheck, rightCheck } from './utils'\nimport { WrapperScrollStyled, WrapperInnerStyled, ScrollButtonLeftStyled, FadingStyled, ScrollButtonRightStyled } from './horizontal-scroll.style'\n\n/* eslint-disable valid-jsdoc, comment: некорректный парсинг jsdoc */\n/**\n * Технический компонент для управления горизонтальным скроллом (используется в Tabs)\n *\n * @param {Object} props - свойства компонента\n * @return {JSX} - компонент\n */\n\nconst easeInOutQuad = (time, start, change, duration) => {\n    /* eslint-disable no-mixed-operators, comment: лучше не скомпоновалось */\n    const half = 2\n    let halvedTime = time / (duration / half)\n    if (halvedTime < 1) {\n        return (change / half) * halvedTime * halvedTime + start\n    }\n    halvedTime -= 1\n    return -change / half * (halvedTime * (halvedTime - half) - 1) + start\n}\n\nconst smoothScroll = (element, change, duration) => {\n    const start = element.scrollLeft\n    const el = element\n    let currentTime = 0\n    const increment = 20\n\n    const animateScroll = () => {\n        currentTime += increment\n        el.scrollLeft = easeInOutQuad(currentTime, start, change, duration)\n        if (currentTime < duration) {\n            requestAnimationFrame(animateScroll)\n        }\n    }\n    animateScroll()\n}\n\nexport class HorizontalScroll extends React.PureComponent {\n    static propTypes = {\n        children: PropTypes.node,\n        refWrapper: PropTypes.func\n    }\n\n    static defaultProps = {\n        children: void 0,\n        refWrapper: _.noop\n    }\n\n    componentDidMount () {\n        this.forceUpdate()\n    }\n\n    setContentsRef = (component) => {\n        this.contents = component\n    }\n\n    handleLeftClick = () => {\n        smoothScroll(this.contents, -300, 1000)\n        this.forceUpdate()\n    }\n\n    handleRightClick = () => {\n        smoothScroll(this.contents, 300, 1000)\n        this.forceUpdate()\n    }\n\n    handleScroll = () => {\n        this.forceUpdate()\n    }\n\n    render () {\n        const { children, refWrapper, parentId } = this.props\n\n        const left = leftCheck(this.contents)\n        const right = rightCheck(this.contents)\n        const isMobile = isMobilePlatform()\n\n        const Wrapper = isMobile ? WrapperScrollStyled.withComponent(OuterStyled) : WrapperScrollStyled\n        const WrapperInner = isMobile ? WrapperInnerStyled.withComponent(InnerStyled) : WrapperInnerStyled\n\n        return (\n            <Wrapper\n                ref={refWrapper}\n                isMobile={isMobile}\n            >\n                {!isMobile && (\n                    <ScrollButtonLeftStyled\n                        onClick={this.handleLeftClick}\n                        disabled={!left}\n                        type=\"button\"\n                        aria-label=\"Листать влево\"\n                    >\n                        <Icon\n                            icon={ic24ArrowLeft}\n                        />\n                    </ScrollButtonLeftStyled>\n                )}\n\n                <WrapperInner\n                    ref={this.setContentsRef}\n                    onScroll={this.handleScroll}\n                    id={parentId}\n                >\n                    {children}\n                </WrapperInner>\n\n                {!isMobile && (\n                    <FadingStyled\n                        left={left}\n                        right={right}\n                    />\n                )}\n\n                {!isMobile && (\n                    <ScrollButtonRightStyled\n                        right={right}\n                        onClick={this.handleRightClick}\n                        disabled={!right}\n                        type=\"button\"\n                        aria-label=\"Листать вправо\"\n                    >\n                        <Icon\n                            icon={ic24ArrowLeft}\n                        />\n                    </ScrollButtonRightStyled>\n                )}\n            </Wrapper>\n        )\n    }\n}\n\nexport default HorizontalScroll\n"],"names":["easeInOutQuad","time","start","change","duration","half","halvedTime","smoothScroll","element","scrollLeft","el","currentTime","increment","animateScroll","requestAnimationFrame","HorizontalScroll","component","contents","forceUpdate","props","children","refWrapper","parentId","left","leftCheck","right","rightCheck","isMobile","isMobilePlatform","Wrapper","WrapperScrollStyled","withComponent","OuterStyled","WrapperInner","WrapperInnerStyled","InnerStyled","handleLeftClick","ic24ArrowLeft","setContentsRef","handleScroll","handleRightClick","React","PureComponent","PropTypes","node","func","_","noop"],"mappings":"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"}